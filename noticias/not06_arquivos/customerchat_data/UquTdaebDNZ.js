if (self.CavalryLogger) { CavalryLogger.start_js(["80u7j"]); }

__d("ActorURIConfig",[],(function(a,b,c,d,e,f){e.exports={PARAMETER_ACTOR:"av",ENCRYPTED_PARAMETER_ACTOR:"eav"}}),null);
__d("ChannelClientID",[],(function(a,b,c,d,e,f){var g=(Math.random()*2147483648|0).toString(16);a={getID:function(){return g}};e.exports=a}),null);
__d("destroyOnUnload",["Run"],(function(a,b,c,d,e,f){function a(a){return b("Run").onLeave(a)}e.exports=a}),null);
__d("GraphQLSubscriptionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:GraphQLSubscriptionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:GraphQLSubscriptionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:GraphQLSubscriptionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppState=function(a){this.$1.app_state=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setAttemptCount=function(a){this.$1.attempt_count=a;return this};a.prototype.setClientSampleWeight=function(a){this.$1.client_sample_weight=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setDebugData=function(a){this.$1.debug_data=a;return this};a.prototype.setDeltaTime=function(a){this.$1.delta_time=a;return this};a.prototype.setErrorRecoveryPolicyName=function(a){this.$1.error_recovery_policy_name=a;return this};a.prototype.setErrorRetriesEnabled=function(a){this.$1.error_retries_enabled=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setExceptionData=function(a){this.$1.exception_data=a;return this};a.prototype.setExceptionType=function(a){this.$1.exception_type=a;return this};a.prototype.setForceLogContext=function(a){this.$1.force_log_context=a;return this};a.prototype.setHandleType=function(a){this.$1.handle_type=a;return this};a.prototype.setHeartbeatInterval=function(a){this.$1.heartbeat_interval=a;return this};a.prototype.setHeartbeatSequenceID=function(a){this.$1.heartbeat_sequence_id=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setMechanism=function(a){this.$1.mechanism=a;return this};a.prototype.setMqttClientCheckpoint=function(a){this.$1.mqtt_client_checkpoint=a;return this};a.prototype.setMqttState=function(a){this.$1.mqtt_state=a;return this};a.prototype.setMutationType=function(a){this.$1.mutation_type=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setPublishCluster=function(a){this.$1.publish_cluster=a;return this};a.prototype.setPublishID=function(a){this.$1.publish_id=a;return this};a.prototype.setPublishTimeMs=function(a){this.$1.publish_time_ms=a;return this};a.prototype.setQueryID=function(a){this.$1.query_id=a;return this};a.prototype.setQueryParams=function(a){this.$1.query_params=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setResult=function(a){this.$1.result=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSubscriptionCall=function(a){this.$1.subscription_call=a;return this};a.prototype.setSubscriptionLeg=function(a){this.$1.subscription_leg=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTopic=function(a){this.$1.topic=a;return this};a.prototype.setTopicData=function(a){this.$1.topic_data=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={app_state:!0,appid:!0,appversion:!0,attempt_count:!0,client_sample_weight:!0,client_userid:!0,clienttime:!0,debug_data:!0,delta_time:!0,error_recovery_policy_name:!0,error_retries_enabled:!0,event:!0,exception_data:!0,exception_type:!0,force_log_context:!0,handle_type:!0,heartbeat_interval:!0,heartbeat_sequence_id:!0,isemployee:!0,mechanism:!0,mqtt_client_checkpoint:!0,mqtt_state:!0,mutation_type:!0,name:!0,publish_cluster:!0,publish_id:!0,publish_time_ms:!0,query_id:!0,query_params:!0,rawclienttime:!0,reason:!0,result:!0,session_id:!0,subscription_call:!0,subscription_leg:!0,time:!0,topic:!0,topic_data:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MqttWsClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAttemptNumber=function(a){this.$1.attempt_number=a;return this};a.prototype.setConnectionStatus=function(a){this.$1.connection_status=a;return this};a.prototype.setDuration=function(a){this.$1.duration=a;return this};a.prototype.setErrorCode=function(a){this.$1.error_code=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setEventType=function(a){this.$1.event_type=a;return this};a.prototype.setFailTotal=function(a){this.$1.fail_total=a;return this};a.prototype.setHostname=function(a){this.$1.hostname=a;return this};a.prototype.setHref=function(a){this.$1.href=a;return this};a.prototype.setOnline=function(a){this.$1.online=a;return this};a.prototype.setPlatform=function(a){this.$1.platform=a;return this};a.prototype.setPublishStatus=function(a){this.$1.publish_status=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSubscribedTopics=function(a){this.$1.subscribed_topics=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSuccessTotal=function(a){this.$1.success_total=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTimePassed=function(a){this.$1.time_passed=a;return this};a.prototype.setTopic=function(a){this.$1.topic=a;return this};a.prototype.setUserSessionID=function(a){this.$1.user_session_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={app_id:!0,attempt_number:!0,connection_status:!0,duration:!0,error_code:!0,error_message:!0,event_type:!0,fail_total:!0,hostname:!0,href:!0,online:!0,platform:!0,publish_status:!0,session_id:!0,subscribed_topics:!0,success_total:!0,time:!0,time_passed:!0,topic:!0,user_session_id:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RealtimeRequestStreamWebClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};a.prototype.setMessage=function(a){this.$1.message=a;return this};a.prototype.setSeverity=function(a){this.$1.severity=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={client_session_id:!0,client_time_ms:!0,message:!0,severity:!0,time:!0,user_fbid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XHPTemplate",["DataStore","DOM","HTML","XHPTemplateProcessor"],(function(a,b,c,d,e,f){__p&&__p();var g=b("XHPTemplateProcessor").processor;function h(a){"use strict";g instanceof Function&&(a=g(a)),this._model=a}h.prototype.render=function(){"use strict";b("HTML").isHTML(this._model)&&(this._model=b("DOM").setContent(document.createDocumentFragment(),this._model)[0]);return this._model.cloneNode(!0)};h.prototype.build=function(){"use strict";return new i(this.render())};h.getNode=function(a,b){"use strict";return h.getNodes(a)[b]};h.getNodes=function(a){"use strict";__p&&__p();var c=b("DataStore").get(a,"XHPTemplate:nodes");if(!c){c={};var d=b("DOM").scry(a,"[data-jsid]");d.push(a);var e=d.length;while(e--){var f=d[e];c[f.getAttribute("data-jsid")]=f;f.removeAttribute("data-jsid")}b("DataStore").set(a,"XHPTemplate:nodes",c)}return c};function i(a){"use strict";this._root=a,this._populateNodes()}i.prototype._populateNodes=function(){"use strict";this._nodes={};this._leaves={};var a=this._root.getElementsByTagName("*");for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.getAttribute("data-jsid");e&&(d.removeAttribute("data-jsid"),this._nodes[e]=d,this._leaves[e]=!d.childNodes.length)}};i.prototype.getRoot=function(){"use strict";return this._root};i.prototype.getNode=function(a){"use strict";return this._nodes[a]};i.prototype.setNodeProperty=function(a,b,c){"use strict";this.getNode(a)[b]=c;return this};i.prototype.setNodeContent=function(a,c){"use strict";if(!this._leaves[a])throw new Error("Can't setContent on non-leaf node: "+a);b("DOM").setContent(this.getNode(a),c);return this};e.exports=h}),null);
__d("ActorURI",["ActorURIConfig","URI"],(function(a,b,c,d,e,f){a={create:function(a,c){return new(b("URI"))(a).addQueryData(b("ActorURIConfig").PARAMETER_ACTOR,c)},PARAMETER_ACTOR:b("ActorURIConfig").PARAMETER_ACTOR};e.exports=a}),null);
__d("BladeRunnerLogger",["BanzaiODS","CurrentUser","FBLogger","RealtimeRequestStreamWebClientTypedLogger","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g="bladerunner_js_client",h={info:"info",warning:"warning",exception:"exception"};function a(){"use strict";this.$1=this.$4(),this.setFBLoggerLevel(1)}a.prototype.info=function(a){"use strict";this.$3>=2&&b("FBLogger")(g).info(a),this.$5(h.info,a)};a.prototype.warn=function(a){"use strict";this.$3>=1&&b("FBLogger")(g).warn(a),this.$5(h.warning,a)};a.prototype.exception=function(a,c){c===void 0&&(c="");c=c+" "+a.toString();this.$3>=0&&b("FBLogger")(g).warn(c);this.$5(h.exception,c)};a.prototype.bumpCounter=function(a,c){c===void 0&&(c=1),b("BanzaiODS").bumpEntityKey("BladeRunnerClient",a,c)};a.prototype.setClientSessionId=function(a){"use strict";this.$2=a};a.prototype.setFBLoggerLevel=function(a){"use strict";this.$3=a};a.prototype.$5=function(a,c){"use strict";if(this.$1){a=new(b("RealtimeRequestStreamWebClientTypedLogger"))().setClientTimeMs(Date.now()).setSeverity(a).setMessage(c).setClientSessionID(this.$2).setUserFbid(b("CurrentUser").getID());a.log()}};a.prototype.$4=function(){"use strict";return b("gkx")("676834")};c=new a();e.exports=c}),null);
__d("CurrentLocale",["LocaleInitialData"],(function(a,b,c,d,e,f){a={};a.get=function(){return b("LocaleInitialData").locale};e.exports=a}),null);
__d("BladeRunnerConfig",["BladeRunnerLogger","CurrentLocale","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.patchRequestHeaders=function(a){"use strict";var c={};typeof b("RTISubscriptionManagerConfig").bladerunner_www_sandbox==="string"&&(c["javascript-sandbox"]=b("RTISubscriptionManagerConfig").bladerunner_www_sandbox);for(var d in a)c[d]=a[d];return c};function a(){"use strict"}c=new a();e.exports=c}),null);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};c={ACCEPTED:1,REJECTED:2,STARTED:3,PAUSED:4,CLOSED:5};e.exports={StreamFrameType:a,StreamRequestType:b,StreamStatus:c}}),null);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f){__p&&__p();g.prototype.getHeaders=function(){"use strict";if(this.headers!=null)return this.headers;throw new Error("Expected headers")};g.readObject=function(a){"use strict";var b=new g();b.streamId=n(a.streamId);b.requestType=n(a.requestType);b.payload=q(a.payload);b.headers=t(a.headers);b.extraHeader=q(a.extraHeader);b.requestTarget=q(a.requestTarget);return b};function g(){"use strict"}h.readObject=function(a){"use strict";var b=new h();b.streamId=n(a.streamId);b.dataId=o(a.dataId);b.data=q(a.data);b.shouldAck=v(a.shouldAck);return b};h.prototype.decodeData=function(){"use strict";if(this.data==null)throw new Error("Expected data");return b("Base64").decode(this.data)};function h(){"use strict"}i.readObject=function(a){"use strict";var b=new i();b.streamId=n(a.streamId);b.dataId=n(a.dataId);b.success=u(a.success);b.message=q(a.message);b.code=o(a.code);return b};function i(){"use strict"}j.readObject=function(a){"use strict";var b=new j();b.streamId=o(a.streamId);b.message=q(a.message);return b};function j(){"use strict"}k.readObject=function(a){"use strict";var b=new k();b.streamId=n(a.streamId);b.status=n(a.status);b.message=q(a.message);b.code=o(a.code);b.shouldRetry=v(a.shouldRetry);b.retryDelayMs=o(a.retryDelayMs);return b};function k(){"use strict"}l.prototype.getRequest=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};l.prototype.getData=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};l.prototype.getDataAck=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};l.prototype.getStatusUpdate=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};l.prototype.getLog=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};l.prototype.getStreamId=function(){"use strict";__p&&__p();if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;throw new Error("Frame with unexpected type")};l.readObject=function(a){"use strict";__p&&__p();var c=new l();c.type=n(a.type);switch(c.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:c.request=g.readObject(r(a.request));break;case b("BladeRunnerTypes").StreamFrameType.DATA:c.data=h.readObject(r(a.data));break;case b("BladeRunnerTypes").StreamFrameType.DATA_ACK:c.dataAck=i.readObject(r(a.dataAck));break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:c.statusUpdate=k.readObject(r(a.statusUpdate));break;case b("BladeRunnerTypes").StreamFrameType.LOG:c.log=j.readObject(r(a.log));break;default:b("BladeRunnerLogger").warn("Frame with unexpected type: "+c.type);return null}return c};l.newRequestFrame=function(a){"use strict";var c=new l();c.type=b("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=a;return c};l.newDataFrame=function(a){"use strict";var c=new l();c.type=b("BladeRunnerTypes").StreamFrameType.DATA;c.data=a;return c};l.newDataAckFrame=function(a){"use strict";var c=new l();c.type=b("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=a;return c};l.newStatusUpdateFrame=function(a){"use strict";var c=new l();c.type=b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=a;return c};l.newLogFrame=function(a){"use strict";var c=new l();c.type=b("BladeRunnerTypes").StreamFrameType.LOG;c.log=a;return c};function l(){"use strict"}function m(a,b){"use strict";this.batchId=a,this.frames=b}m.prototype.getFrames=function(){"use strict";if(this.frames!=null)return this.frames;throw new Error("Expected frames")};m.prototype.write=function(){"use strict";return JSON.stringify(this)};m.read=function(a){"use strict";__p&&__p();a=JSON.parse(a);var b=a.batchId||0,c=[];for(var a=a.frames,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f=l.readObject(f);f!=null&&c.push(f)}return new m(b,c)};function n(a){if(typeof a==="number")return a;throw new Error("Expected number")}function o(a){return a==null?null:n(a)}function p(a){if(typeof a==="string")return a;throw new Error("Expected string")}function q(a){return a==null?null:p(a)}function r(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function s(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function t(a){return a==null?null:s(a)}function u(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function v(a){return a==null?null:u(a)}e.exports={GatewayStreamBatch:m,GatewayStreamData:h,GatewayStreamDataAck:i,GatewayStreamFrame:l,GatewayStreamLog:j,GatewayStreamRequest:g,GatewayStreamStatusUpdate:k}}),null);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;function a(a,b,c){"use strict";this.$2=a,this.$1=b,this.$3=c}a.prototype.onProxyResponse=function(a){"use strict";__p&&__p();this.$4(a);var c=[];for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$2.witnessFrame(g)&&c.push(g)}c.length>0&&this.$5(new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,c))};a.prototype.onDisconnect=function(){"use strict";this.$2.resetErrors();var a=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=b("BladeRunnerTypes").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};a.prototype.$4=function(a){"use strict";__p&&__p();a=a.getFrames().filter(function(a){return a.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.getStatusUpdate();if(e.status==b("BladeRunnerTypes").StreamStatus.CLOSED||e.status==b("BladeRunnerTypes").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,h=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=b("BladeRunnerTypes").StreamStatus.PAUSED;var i=g;e.retryDelayMs!=null&&(i=e.retryDelayMs);b("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?b("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(b("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?setTimeout(function(){return this.$6()}.bind(this),i):this.$6())}else b("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?b("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):b("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};a.prototype.$6=function(){"use strict";this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()&&this.$3.sendRetryStreamRequest(this.$2)};a.prototype.$5=function(a){"use strict";__p&&__p();b("BladeRunnerLogger").bumpCounter("send_to_handler");var c=[];this.$1.onBatch(a);for(var a=a.getFrames(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{switch(f.type){case b("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(f.getData().decodeData());c.push(f.getData());break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(f.getStatusUpdate().status);break;case b("BladeRunnerTypes").StreamFrameType.LOG:f=f.getLog().message;f!=null&&this.$1.onLog(f);break;default:throw new Error("Frame with unexpected type")}}catch(a){b("BladeRunnerLogger").bumpCounter("send_to_handler_error"),b("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}}this.$7(c)};a.prototype.$7=function(a){"use strict";__p&&__p();var c=[];for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.shouldAck===!0&&f.dataId!=null){var g=new(b("BladeRunnerTypesInternal").GatewayStreamDataAck)();g.streamId=f.streamId;g.dataId=f.dataId;g.success=!0;c.push(g)}}this.$3.sendDataAcks(c)};e.exports=a}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","FantailLogger","FBLogger","Log","LogHistory","MqttWsClientTypedLogger","Random","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="mqtt_client",h="MqttJsClient",i=null,j={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"};k.getInstance=function(){i||(i=new k());return i};function k(){this.$1=b("LogHistory").getInstance(g),this.$2=0,this.$3=b("gkx")("778292"),this.$4=Math.floor(b("Random").random()*Number.MAX_SAFE_INTEGER),this.$5=Date.now()}k.prototype.setAppId=function(a){this.$2===0&&(this.$2=a)};k.prototype.logConnect=function(a){var c=a.sessionID,d=a.connectionStatus,e=a.duration,f=a.hostname,g=a.attemptNumber,h=a.failTotal,i=a.successTotal,k=a.subscribedTopics,l=a.errorCode;a=a.errorMessage;var m=d?"success":"failed";this.bumpCounter(j.CONNECT+"."+m);m=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setSessionID(c).setConnectionStatus(d).setDuration(e).setHostname(f).setAttemptNumber(g).setFailTotal(h).setSuccessTotal(i).setTimePassed(Date.now()-this.$5).setSubscribedTopics(k).setErrorCode(l).setErrorMessage(a);this.$6(j.CONNECT,m)};k.prototype.logDisconnect=function(a){var c=a.sessionID,d=a.errorCode,e=a.errorMessage;a=a.duration;this.bumpCounter(j.DISCONNECT);c=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setSessionID(c).setDuration(a).setErrorCode(d).setErrorMessage(e).setTimePassed(Date.now()-this.$5);this.$6(j.DISCONNECT,c)};k.prototype.logPublish=function(a){var c=a.sessionID,d=a.topic,e=a.connectionStatus;a=a.publishStatus;this.bumpCounter(j.PUBLISH+"."+d);c=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setSessionID(c).setTopic(d).setConnectionStatus(e).setPublishStatus(a).setTimePassed(Date.now()-this.$5);this.$6(j.PUBLISH,c)};k.prototype.logError=function(a,c){b("FBLogger")(g).catching(a).mustfix(c),this.$7(b("FantailLogger").error,c)};k.prototype.logErrorWarn=function(a,c){b("FBLogger")(g).catching(a).warn(c),this.$7(b("FantailLogger").warn,c)};k.prototype.logWarn=function(a,c){this.$1.warn(a,c),this.$7(b("FantailLogger").warn,c)};k.prototype.debugTrace=function(a,c){this.$1.debug(a,c),this.$7(b("FantailLogger").debug,c)};k.prototype.bumpCounter=function(a){this.$2!==0&&b("BanzaiODS").bumpEntityKey("mqtt_ws_client",this.$2+"."+a),b("BanzaiODS").bumpEntityKey("mqtt_ws_client",a)};k.prototype.$6=function(a,c){c.setEventType(a);c.setAppID(this.$2);c.setOnline(this.$8());var d=JSON.stringify(c.getData());this.$1.log(a,d);a!==j.PUBLISH&&c.log();this.$7(b("FantailLogger").info,d)};k.prototype.$7=function(a,c){b("gkx")("676936")&&a(h,c)};k.prototype.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};e.exports=k}),null);
__d("paho-mqtt",[],(function(a,b,c,d,e,f){__p&&__p();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var b=function(b){__p&&__p();var c="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},e=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(i(g.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},f=function(a,b){return function(){return a.apply(b,arguments)}},g={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},h={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},i=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},j=[0,6,77,81,73,115,100,112,3],k=[0,4,77,81,84,84,4],l=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};l.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],e=0,f;this.messageIdentifier!==void 0&&(b+=2);switch(this.type){case d.CONNECT:switch(this.mqttVersion){case 3:b+=j.length+3;break;case 4:b+=k.length+3;break}b+=r(this.clientId)+2;this.willMessage!==void 0&&(b+=r(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==void 0&&(b+=r(this.userName)+2);this.password!==void 0&&(b+=r(this.password)+2);break;case d.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=r(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case d.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=r(this.topics[g]),b+=c[g]+2;break;case d.PUBREL:a|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);e=r(this.payloadMessage.destinationName);b+=e+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case d.DISCONNECT:break;default:break}var i=q(b),l=i.length+1;b=new ArrayBuffer(b+l);var m=new Uint8Array(b);m[0]=a;m.set(i,1);if(this.type==d.PUBLISH)l=o(this.payloadMessage.destinationName,e,m,l);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:m.set(j,l);l+=j.length;break;case 4:m.set(k,l);l+=k.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==void 0&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==void 0&&(a|=128);this.password!==void 0&&(a|=64);m[l++]=a;l=n(this.keepAliveInterval,m,l)}this.messageIdentifier!==void 0&&(l=n(this.messageIdentifier,m,l));switch(this.type){case d.CONNECT:l=o(this.clientId,r(this.clientId),m,l);this.willMessage!==void 0&&(l=o(this.willMessage.destinationName,r(this.willMessage.destinationName),m,l),l=n(f.byteLength,m,l),m.set(f,l),l+=f.byteLength);this.userName!==void 0&&(l=o(this.userName,r(this.userName),m,l));this.password!==void 0&&(l=o(this.password,r(this.password),m,l));break;case d.PUBLISH:m.set(h,l);break;case d.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)l=o(this.topics[g],c[g],m,l),m[l++]=this.requestedQos[g];break;case d.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)l=o(this.topics[g],c[g],m,l);break;default:}return b};function m(a,b){__p&&__p();var c=b,e=a[b],f=e>>4;e=e&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new l(f);switch(f){case d.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case d.PUBLISH:c=e>>1&3;f=p(a,b);b+=2;h=t(a,b,f);b+=f;c>0&&(i.messageIdentifier=p(a,b),b+=2);f=new y(a.subarray(b,g));(e&1)==1&&(f.retained=!0);(e&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:i.messageIdentifier=p(a,b);break;case d.SUBACK:i.messageIdentifier=p(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function n(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function o(a,b,c,d){d=n(b,c,d);s(a,c,d);return d+b}function p(a,b){return 256*a[b]+a[b+1]}function q(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function r(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function s(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(i(g.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function t(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var h=a[f++];if(h<128)e=h;else{var j=a[f++]-128;if(j<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),""]));if(h<224)e=64*(h-192)+j;else{var k=a[f++]-128;if(k<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16)]));if(h<240)e=4096*(h-224)+64*j+k;else{var l=a[f++]-128;if(l<0)throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16),l.toString(16)]));if(h<248)e=262144*(h-240)+4096*j+64*k+l;else throw new Error(i(g.MALFORMED_UTF,[h.toString(16),j.toString(16),k.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var u=function(a,b,c){__p&&__p();this._client=a;this._window=b;this._keepAliveInterval=c*1e3;this.isReset=!1;var e=new l(d.PINGREQ).encode(),f=function(a){return function(){return h.apply(a)}},h=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(g.PING_TIMEOUT.code,i(g.PING_TIMEOUT))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(e),this.timeout=this._window.setTimeout(f(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(f(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},v=function(a,b,c,d,e){this._window=b;c||(c=30);b=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=setTimeout(b(d,a,e),c*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,c,d,e,f){__p&&__p();if(!("WebSocket"in b&&b.WebSocket!==null))throw new Error(i(g.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in b&&b.ArrayBuffer!==null))throw new Error(i(g.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,c,d,e,f);this.host=c;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=c+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0};w.prototype.host=null;w.prototype.port=null;w.prototype.path=null;w.prototype.uri=null;w.prototype.clientId=null;w.prototype.socket=null;w.prototype.connected=!1;w.prototype.maxMessageIdentifier=65536;w.prototype.connectOptions=null;w.prototype.hostIndex=null;w.prototype.onConnected=null;w.prototype.onConnectionLost=null;w.prototype.onMessageDelivered=null;w.prototype.onMessageArrived=null;w.prototype.traceFunction=null;w.prototype._msg_queue=null;w.prototype._buffered_msg_queue=null;w.prototype._connectTimeout=null;w.prototype.sendPinger=null;w.prototype.receivePinger=null;w.prototype._reconnectInterval=1;w.prototype._reconnecting=!1;w.prototype._reconnectTimeout=null;w.prototype.disconnectedPublishing=!1;w.prototype.disconnectedBufferSize=5e3;w.prototype.receiveBuffer=null;w.prototype._traceBuffer=null;w.prototype._MAX_TRACE_ENTRIES=100;w.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(i(g.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(i(g.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};w.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(i(g.INVALID_STATE,["not connected"]));var c=new l(d.SUBSCRIBE);c.topics=[a];b.qos!==void 0?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:i(a)})});b.timeout&&(c.timeOut=new v(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:g.SUBSCRIBE_TIMEOUT.code,errorMessage:i(g.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};w.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(i(g.INVALID_STATE,["not connected"]));var c=new l(d.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new v(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:g.UNSUBSCRIBE_TIMEOUT.code,errorMessage:i(g.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};w.prototype.send=function(a){this._trace("Client.send",a);wireMessage=new l(d.PUBLISH);wireMessage.payloadMessage=a;a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage,null));this._schedule_message(wireMessage);return wireMessage.messageIdentifier};w.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(i(g.INVALID_STATE,["not connecting or connected"]));wireMessage=new l(d.DISCONNECT);this._notify_msg_sent[wireMessage]=f(this._disconnected,this);this._schedule_message(wireMessage)};w.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};w.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),c)};w.prototype.stopTrace=function(){delete this._traceBuffer};w.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=f(this._on_socket_open,this);this.socket.onmessage=f(this._on_socket_message,this);this.socket.onerror=f(this._on_socket_error,this);this.socket.onclose=f(this._on_socket_close,this);this.sendPinger=new u(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new u(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new v(this,window,this.connectOptions.timeout,this._disconnected,[g.CONNECT_TIMEOUT.code,i(g.CONNECT_TIMEOUT)])};w.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};w.prototype.store=function(a,b){};w.prototype.restore=function(a){};w.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};w.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==void 0)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===d.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};w.prototype._on_socket_open=function(){var a=new l(d.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};w.prototype._on_socket_message=function(a){this._trace("Client._on_socket_message",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};w.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=m(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(g.INTERNAL_ERROR.code,i(g.INTERNAL_ERROR,[a.message,d]));return}return b};w.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case d.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();this.connectOptions.cleanSession&&(this._sentMessages={},this._receivedMessages={});if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this.connected=!1;this._disconnected(g.CONNACK_RETURNCODE.code,i(g.CONNACK_RETURNCODE,[a.returnCode,h[a.returnCode]]),a.returnCode);break}var b=[];for(var c in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,c)&&b.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0){var e=null,f=this._buffered_msg_queue.reverse();while(e=f.pop())b.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage,null))}var b=b.sort(function(a,b){return a.sequence-b.sequence});for(var f=0,e=b.length;f<e;f++){var j=b[f];if(j.type==d.PUBLISH&&j.pubRecReceived){var k=new l(d.PUBREL,{messageIdentifier:j.messageIdentifier});this._schedule_message(k)}else this._schedule_message(j)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(f,this._wsuri);this._process_queue();break;case d.PUBLISH:this._receivePublish(a);break;case d.PUBACK:e=a.messageIdentifier;var j=this._sentMessages[e];j&&(delete this._sentMessages[e],this.onMessageDelivered&&this.onMessageDelivered(j.payloadMessage,e));break;case d.PUBREC:var j=this._sentMessages[a.messageIdentifier];if(j){j.pubRecReceived=!0;var k=new l(d.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",j);this._schedule_message(k)}break;case d.PUBREL:b=this._receivedMessages[a.messageIdentifier];b&&(this._receiveMessage(b),delete this._receivedMessages[a.messageIdentifier]);f=new l(d.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(f);break;case d.PUBCOMP:e=a.messageIdentifier;var j=this._sentMessages[e];delete this._sentMessages[e];this.onMessageDelivered&&this.onMessageDelivered(j.payloadMessage,e);break;case d.SUBACK:var j=this._sentMessages[a.messageIdentifier];j&&(j.timeOut&&j.timeOut.cancel(),a.returnCode[0]===128?j.onFailure&&j.onFailure(a.returnCode):j.onSuccess&&j.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case d.UNSUBACK:var j=this._sentMessages[a.messageIdentifier];j&&(j.timeOut&&j.timeOut.cancel(),j.callback&&j.callback(),delete this._sentMessages[a.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,i(g.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(g.INVALID_MQTT_MESSAGE_TYPE.code,i(g.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){k=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(g.INTERNAL_ERROR.code,i(g.INTERNAL_ERROR,[a.message,k]));return}};w.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(g.SOCKET_ERROR.code,i(g.SOCKET_ERROR,[a.data])),this.connectOptions.onSocketError&&this.connectOptions.onSocketError(a)};w.prototype._on_socket_close=function(a){this._reconnecting||this._disconnected(g.SOCKET_CLOSE.code,i(g.SOCKET_CLOSE,a!=null?[a.code,a.reason,a.wasClean]:[]))};w.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};w.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new l(d.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new l(d.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};w.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};w.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};w.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};w.prototype._disconnected=function(a,b,c){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==void 0&&this._reconnecting){this._reconnectTimeout=new v(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===void 0&&(a=g.OK.code,b=i(g.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==g.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b,connack:c})}};w.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};w.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var x=function(a,b,c,d){__p&&__p();var f;if(typeof a!=="string")throw new Error(i(g.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;f=a;var h=f.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(h)a=h[4]||h[2],b=parseInt(h[7]),c=h[8];else throw new Error(i(g.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(i(g.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(i(g.INVALID_TYPE,[typeof c,"path"]));var j=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";f="ws://"+(j?"["+a+"]":a)+":"+b+c}var k=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;k++}if(typeof d!=="string"||k>65535)throw new Error(i(g.INVALID_ARGUMENT,[d,"clientId"]));var n=new w(f,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getURI=function(){return f};this._setURI=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(i(g.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(i(g.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};e(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",onSocketError:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===void 0&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(i(g.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===void 0?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==void 0&&d.userName===void 0)throw new Error(i(g.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof y))throw new Error(i(g.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(i(g.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(i(g.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var h=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(i(g.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)h=!0;else if(!h)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(h)throw new Error(i(g.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!h){if(!d.ports)throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(i(g.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(i(g.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));h=d.hosts[b];var a=d.ports[b],j=h.indexOf(":")!==-1;f="ws://"+(j?"["+h+"]":h)+":"+a+c;d.uris.push(f)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(i(g.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};e(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof y)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(i(g.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new y(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof y)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(i(g.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));return n.send(e)}else{e=new y(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);arguments.length>=4&&(e.retained=d);return n.send(e)}};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(x.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var y=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw i(g.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return t(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(r(b));a=new Uint8Array(a);s(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(i(g.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(i(g.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(y.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});var z=function(a,b){a=new l(d.CONNECT,a);a.clientId=b;return a},A=function(a,b){b=new l(b);b.topics=[a];b.requestedQos=[1];b.messageIdentifier=this.messageSequenceId++;return b},B=function(a){return A(a,d.SUBSCRIBE)},C=function(a){return A(a,d.UNSUBSCRIBE)},D=function(a,b,c){var e;e=new y(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);var f;f=new l(d.PUBLISH);f.payloadMessage=e;f.messageIdentifier=this.messageSequenceId++;return f},E=function(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=m(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b};return{TESTING_CLIENT_IMPL:w,Client:x,Message:y,Encoder:{encodeConnect:z,encodePublish:D,encodeSubscribe:B,encodeUnsubscribe:C,messageSequenceId:1},Decoder:{decode:E}}}(window);return b})}),null);
__d("MqttConnection",["Promise","MqttLogger","Random","gkx","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h="publish",i="subscribe",j="unsubscribe",k=function(a){},l=18e4,m=21,n=new Set(["AMQJS0007E","AMQJS0008I"]);function o(a){return a?a.split(" ")[0]:""}function a(){this.$6=!1,this.$9=b("MqttLogger").getInstance(),this.$10="Disconnected",this.$15=new Set(),this.$17=[],this.$18=new Map(),this.$19=0,this.$20=0}a.prototype.run=function(a){__p&&__p();var b=a.onStateChange,c=a.onJSError,d=a.onMessageReceived,e=a.endpoint,f=a.deviceId,g=a.userFbid,h=a.appId,i=a.subscribedTopics;a=a.capabilities;if(this.$6){this.$9.debugTrace("run","Run called while in running state.");return}this.$1=b;this.$3=d;this.$4=e;this.$8=f;this.$11=g;this.$14=h;this.$6=!0;this.$12=0;this.$16=a;this.$2=c||k;i&&i.forEach(function(a){return this.$15.add(a)}.bind(this));this.$21()};a.prototype.shutdown=function(){this.$22(),this.$6=!1,this.$9.debugTrace("shutdown","Shutdown")};a.prototype.subscribe=function(a){this.$15.add(a);if(!this.$23(i))return b("gkx")("676932");try{this.$5.subscribe(a,{})}catch(b){this.$9.logError(b,"Exception subscribing"),this.$9.bumpCounter("subscribe_exception."+a)}this.$9.debugTrace("subscribe","Subscribing to "+a);return!0};a.prototype.publish=function(a,c,d){__p&&__p();var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g=this.$23(h),i;if(!this.$6||!g)this.$17.push({topic:a,payload:c,qos:d,ack:e}),i="buffered";else{try{c=this.$5.publish(a,c,d,!1);c!=null?this.$18.set(c,e):e.resolve()}catch(b){this.$9.logError(b,"Exception publishing"),this.$9.bumpCounter("publish_exception."+a),e.reject(b)}i="published"}this.$9.logPublish({sessionID:this.$7,topic:a,connectionStatus:g,publishStatus:i});return f};a.prototype.unsubscribe=function(a){this.$15["delete"](a);if(!this.$23(j))return!1;try{this.$5.unsubscribe(a,{})}catch(b){this.$9.logError(b,"Exception unsubscribing"),this.$9.bumpCounter("unsubscribe_exception."+a)}this.$9.debugTrace("unsubscribe","Unsubscribing to "+a);return!0};a.prototype.isRunning=function(){return this.$6};a.prototype.$22=function(){this.$6&&this.$5&&(this.$24("Disconnected"),this.$5.onMessageArrived=k,this.$5.onMessageDelivered=k,this.$5.onConnectionLost=k,this.$5.connectOptions&&(this.$5.connectOptions.onSuccess=k,this.$5.connectOptions.onFailure=k,b("gkx")("676933")||(this.$5.connectOptions.onSocketOpen=k,this.$5.connectOptions.onSocketError=k)),this.$5.isConnected()&&this.$5.disconnect(),this.$5=null)};a.prototype.$24=function(a){a!==this.$10&&(this.$10=a,this.$1(a))};a.prototype.$21=function(){__p&&__p();if(!this.$6)return;this.$24("Connecting");var a=Date.now(),c=Array.from(this.$15);try{this.$5=new(b("paho-mqtt").Client)(this.$4,"mqttwsclient");this.$7=this.$25();var d=Date.now();this.$5.onConnectionLost=function(a){a.errorCode&&this.$9.logDisconnect({sessionID:this.$7,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$13}),this.$26()}.bind(this);this.$5.onMessageArrived=function(a){var b=a.destinationName;this.$9.debugTrace("onMessageArrived","Message received on "+b);this.$9.bumpCounter("message_arrived."+b);try{this.$3(a.destinationName,a.payloadString)}catch(a){this.$9.logError(a,"Unable to parse messaging"),this.$9.bumpCounter("error_processing_message."+b)}}.bind(this);this.$5.onMessageDelivered=function(a,b){this.$27(a,b)}.bind(this);this.$5.connect({userName:JSON.stringify({u:this.$11,s:this.$7,cp:1,ecp:this.$16,chat_on:!0,fg:1,d:this.$28(),ct:"websocket",mqtt_sid:"",aid:this.$14,st:c,dc:""}),mqttVersion:3,password:"",keepAliveInterval:g,onFailure:function(a){__p&&__p();this.$9.debugTrace("connect","Connect failed "+a.errorMessage);this.$29(!1,d,c,a.errorCode,a.errorMessage);if(a&&a.connack){this.$9.bumpCounter("connect_failure."+a.connack);if(a.connack===m){this.$26(l);return}}n.has(o(a.errorMessage))&&this.$30(new Error(a.errorMessage),"connect_failure");this.$26()}.bind(this),onSuccess:function(){this.$9.debugTrace("connect","Connect success"),this.$29(!0,d,c),this.$24("Connected"),this.$12=0,this.$13=Date.now(),this.$17=[]}.bind(this),ignoreSubProtocol:!0,onSocketOpen:function(){return this.$31()}.bind(this),onSocketError:function(a){b("gkx")("676934")?this.$9.bumpCounter("websocket_error.error"):this.$30(a,"websocket_error")}.bind(this)})}catch(b){this.$9.bumpCounter("js_error_in_init_exception"),this.$24("Disconnected"),this.$29(!1,a,c,14,b.message),b&&this.$9.logErrorWarn(b,"js error"),this.$30(b,"client_init")}};a.prototype.$31=function(){this.$17.forEach(function(a){if(this.$5){var b=this.$5.publish(a.topic,a.payload,a.qos);b!=null?this.$18.set(b,a.ack):a.ack.resolve()}}.bind(this))};a.prototype.$26=function(a){__p&&__p();a===void 0&&(a=null);if(!this.$6)return;this.$22();this.$7=-1;a=(a=a)!=null?a:Math.pow(2,Math.min(this.$12,6))*(1e3+Math.random()*200);this.$9.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");setTimeout(function(){this.$21()}.bind(this),a);this.$12+=1};a.prototype.$25=function(){return Math.floor(b("Random").random()*Number.MAX_SAFE_INTEGER)};a.prototype.$28=function(){return this.$8};a.prototype.$23=function(a){__p&&__p();if(!this.$6){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$5==null){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}if(this.$10!=="Connected"){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called with connection state "+this.$10);return!1}var b=this.$5.isConnected();if(!b){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called with client connection state "+b);return!1}return!0};a.prototype.$29=function(a,b,c,d,e){a===!0?this.$20++:this.$19++,this.$9.logConnect({sessionID:this.$7,connectionStatus:a,duration:Date.now()-b,hostname:this.$4,attemptNumber:this.$12,failTotal:this.$19,successTotal:this.$20,subscribedTopics:c,errorCode:d,errorMessage:e})};a.prototype.$27=function(a,b){a=b!=null?b:"null";this.$9.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$18.get(b);if(a==null)return;this.$18["delete"](b);a.resolve()};a.prototype.$30=function(a,b){try{this.$9.bumpCounter("js_error_in_init");this.$9.bumpCounter(b+".error");var c=a?a.message:"error";this.$9.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$9.bumpCounter("js_error_in_error_logging"),this.$9.logError(a,"JS error while trying to log previous error")}};e.exports=a}),null);
__d("uuid",[],(function(a,b,c,d,e,f){function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}e.exports=a}),null);
__d("MqttChannel",["MqttConnection","MqttLogger","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.endpoint,d=a.userFbid,e=a.appId,f=a.initialSubscribedTopics;a=a.capabilities;this.$8=b("MqttLogger").getInstance();this.$8.setAppId(e);this.$9=e;this.$10=d;this.$1=c;this.$3="Disconnected";this.$2=[];this.$4=new Map();this.$7=new(b("MqttConnection"))();this.$5=b("uuid")();this.$6=new Set();this.$11(f,a)}a.prototype.$11=function(a,b){if(this.$7.isRunning()){this.$12("run","Connection started calling run again");return}this.$7.run({onStateChange:function(a){this.$13(a)}.bind(this),onJSError:function(a){this.$14(a)}.bind(this),onMessageReceived:function(a,b){this.$15(a,b)}.bind(this),deviceId:this.$5,endpoint:this.$1,userFbid:this.$10,appId:this.$9,subscribedTopics:a,capabilities:b})};a.prototype.shutdown=function(){this.$7&&this.$7.shutdown()};a.prototype.publish=function(a,b){return this.$7.publish(a,b,1)};a.prototype.subscribe=function(a,b){this.$7.subscribe(a)||this.$6.add(a);var c=this.$4.get(a);!c?(c=[b],this.$4.set(a,c)):c.push(b)};a.prototype.subscribeChannelEvents=function(a){this.$2.push(a)};a.prototype.unsubscribe=function(a){this.$7.unsubscribe(a)||this.$6["delete"](a),this.$4["delete"](a)};a.prototype.getDeviceId=function(){return this.$5};a.prototype.getConnectionState=function(){return this.$3};a.prototype.getEndpoint=function(){return this.$1};a.prototype.testOnlyResetState=function(){this.$1="",this.$2=[],this.$3="Disconnected",this.$4=new Map(),this.$8=b("MqttLogger").getInstance(),this.$7=new(b("MqttConnection"))(),this.$5=b("uuid")(),this.$6=new Set()};a.prototype.testOnlyMessageReceived=function(a,b){this.$15(a,b)};a.prototype.$15=function(a,b){__p&&__p();var c=this.$4.get(a);if(!c)this.$8.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$8.logError(a,"Listener exception"),this.$8.bumpCounter("listener_error")}}};a.prototype.$14=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};a.prototype.$13=function(a){this.$3!=="Connected"&&a==="Connected"&&(this.$6.forEach(function(a){return this.$7.subscribe(a)}.bind(this)),this.$6.clear()),this.$3=a,this.$12("_changeState","Connection state = "+a),this.$16(a)};a.prototype.$16=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};a.prototype.$12=function(a,b){this.$8.debugTrace(a,"Mqtt channel: "+b)};e.exports=a}),null);
__d("FBMqttChannel",["MqttChannel","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("MqttChannel"))({endpoint:b("MqttWebConfig").endpoint,userFbid:b("MqttWebConfig").fbid,appId:b("MqttWebConfig").appID,initialSubscribedTopics:b("MqttWebConfig").subscribedTopics,capabilities:b("MqttWebConfig").capabilities})}),null);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","FBMqttChannel","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="Connected",h="Disconnected",i=32*1024,j="/br_sr",k="/sr_res",l=null;function m(a){this.$1=[],this.$2=0,this.$3=null,this.$4=0,this.$5=new Map(),this.$6=a!=null?a:b("FBMqttChannel"),b("BladeRunnerLogger").setClientSessionId(b("uuid")()),this.$7()}m.get=function(){l==null&&(l=new m(b("FBMqttChannel")));return l};m.prototype.sendNewStreamRequest=function(a,c){c=new(b("BladeRunnerEventHandler"))(a,c,this);var d=a.getRequest();this.$5.set(d.streamId,c);this.getStreamCount()<=m.maxStreamCount?this.$8(d):(b("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),b("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(a.getRequest().getHeaders())),this.$9(c,d.streamId))};m.prototype.sendRetryStreamRequest=function(a){this.$8(a.getRequest())};m.prototype.sendCancel=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_cancel");var c=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();c.streamId=a;c.status=b("BladeRunnerTypes").StreamStatus.CLOSED;this.$10(c);this.removeStream(a)};m.prototype.sendDataAcks=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$11(a)};m.prototype.removeStream=function(a){this.$5["delete"](a)};m.prototype.getStreamCount=function(){return this.$5.size};m.prototype.getNextStreamId=function(){this.$4++;return this.$4};m.prototype.onMQTTStateChanged=function(a){this.$12();if(a!=h&&a!=g||this.$3==a)return;this.$3=a;b("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==h?(b("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$13()):a==g&&b("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};m.prototype.$8=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a)),this.$12()};m.prototype.$10=function(a){this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)),this.$12()};m.prototype.$11=function(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e))}this.$12()};m.prototype.$14=function(){this.$2++;return this.$2};m.prototype.$12=function(){if(this.$6.getConnectionState()===g&&this.$1.length>0){try{this.$15(this.$1)}finally{this.$1=[]}return!0}return!1};m.prototype.$15=function(a){__p&&__p();var c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$14(),a);c=c.write();if(c.length>i){var d=Math.floor(a.length/2);if(d===0)throw new Error("Publish is too long: "+c.length);this.$15(a.slice(0,d));this.$15(a.slice(d,a.length))}else try{b("BladeRunnerLogger").info("send message to "+j+" "+c),this.$6.publish(j,c),b("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){b("BladeRunnerLogger").exception(a,"Failed publishing to MQTT");b("BladeRunnerLogger").bumpCounter("mqtt_publish_error");throw a}};m.prototype.$7=function(){b("BladeRunnerLogger").info("Starting socket with endpoint "+this.$6.getEndpoint()+" useragent "+navigator.userAgent),this.$16(),this.onMQTTStateChanged(this.$6.getConnectionState()),this.$6.subscribeChannelEvents({onMQTTStateChanged:function(a){this.onMQTTStateChanged(a)}.bind(this),onJSError:function(a){b("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),b("BladeRunnerLogger").bumpCounter("mqtt_channel_error")}}),this.$6.subscribe(j,function(a){throw new Error("Unexpected response: "+j+" "+a.toString())}),this.$6.subscribe(k,function(a){this.$17(a)}.bind(this))};m.prototype.$17=function(a){a=b("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};m.prototype.processBatch=function(a){__p&&__p();try{b("BladeRunnerLogger").bumpCounter("socket_process_batch");b("BladeRunnerLogger").info("Received batch "+JSON.stringify(a));var c=null;for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g=g.getStreamId();c==null&&(c=g);if(g!=null&&c!=g)throw new Error("Received batch with frames for multiple streams")}if(c!=null){g=this.$5.get(c);g!=null?g.onProxyResponse(a):b("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+c)}else b("BladeRunnerLogger").info("Received batch with no frames")}catch(a){b("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");b("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};m.prototype.$13=function(){this.$5.forEach(function(a,b,c){a.onDisconnect()})};m.prototype.$9=function(a,c){var d=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();d.streamId=c;d.status=b("BladeRunnerTypes").StreamStatus.REJECTED;d.shouldRetry=!1;d.retryDelayMs=0;c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(d)]);a.onProxyResponse(c)};m.prototype.$16=function(){"WebSocket"in window||(b("BladeRunnerLogger").warn("Browser does not support websocket"),b("BladeRunnerLogger").bumpCounter("websocket_not_supported"))};m.maxStreamCount=500;e.exports=m}),null);
__d("BladeRunnerStream",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.getStreamHandler=function(){"use strict";return this.$1};a.prototype.cancel=function(){"use strict"};a.prototype.isAlive=function(){"use strict";return!1};a.prototype.getStatus=function(){"use strict";return null};a.prototype.getStreamId=function(){"use strict";return 0};e.exports=a}),null);
__d("BladeRunnerStreamState",["BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}a.prototype.getRequest=function(){"use strict";return this.$1};a.prototype.isAlive=function(){"use strict";return!(this.$2==b("BladeRunnerTypes").StreamStatus.CLOSED||this.$2==b("BladeRunnerTypes").StreamStatus.REJECTED)};a.prototype.getLastStatus=function(){"use strict";return this.$2};a.prototype.setLastStatus=function(a){"use strict";this.$2=a};a.prototype.onError=function(){"use strict";this.$3+=1};a.prototype.getErrorCount=function(){"use strict";return this.$3};a.prototype.resetErrors=function(){"use strict";this.$3=0};a.prototype.getRetryRequestScheduled=function(){"use strict";return this.$6};a.prototype.setRetryRequestScheduled=function(a){"use strict";this.$6=a};a.prototype.witnessFrame=function(a){"use strict";__p&&__p();switch(a.type){case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:a=a.getStatusUpdate();var c=!0;switch(a.status){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case b("BladeRunnerTypes").StreamStatus.STARTED:c=this.getLastStatus()!=b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.PAUSED:c=this.getLastStatus()==b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.CLOSED:case b("BladeRunnerTypes").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(a.status);return c;default:return!0}};a.prototype.setRetriesAllowed=function(a){"use strict";this.$5=a};a.prototype.getRetriesAllowed=function(){"use strict";return this.$5};e.exports=a}),null);
__d("BladeRunnerSocketStream",["BladeRunnerLogger","BladeRunnerStream","BladeRunnerStreamState","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();var g,h=5;c=babelHelpers.inherits(a,b("BladeRunnerStream"));g=c&&c.prototype;function a(a,c,d){"use strict";g.constructor.call(this,a),this.$BladeRunnerSocketStream1=d,this.$BladeRunnerSocketStream2=new(b("BladeRunnerStreamState"))(c),this.$BladeRunnerSocketStream2.setRetriesAllowed(h)}a.prototype.send=function(){"use strict";this.$BladeRunnerSocketStream1.sendNewStreamRequest(this.$BladeRunnerSocketStream2,this.getStreamHandler())};a.prototype.cancel=function(){"use strict";this.isAlive()&&(this.$BladeRunnerSocketStream1.sendCancel(this.$BladeRunnerSocketStream2.getRequest().streamId),this.$BladeRunnerSocketStream2.setLastStatus(b("BladeRunnerTypes").StreamStatus.CLOSED))};a.prototype.isAlive=function(){"use strict";return this.$BladeRunnerSocketStream2.isAlive()};a.prototype.getStatus=function(){"use strict";return this.$BladeRunnerSocketStream2.getLastStatus()};a.prototype.getStreamId=function(){"use strict";return this.$BladeRunnerSocketStream2.getRequest().streamId};e.exports=a}),null);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a!=null?a:b("BladeRunnerSocket").get()}a.prototype.requestStream=function(a,c,d){"use strict";__p&&__p();var e=new(b("BladeRunnerTypesInternal").GatewayStreamRequest)();e.streamId=this.$1.getNextStreamId();e.requestType=b("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;e.headers=b("BladeRunnerConfig").patchRequestHeaders(a);e.extraHeader=JSON.stringify(e.headers);e.payload=c!=null?b("Base64").encode(c):null;a=new(b("BladeRunnerSocketStream"))(d,e,this.$1);a.send();return a};a.prototype.logInfo=function(a){"use strict";b("BladeRunnerLogger").info(a)};a.prototype.bumpCounter=function(a){"use strict";b("BladeRunnerLogger").bumpCounter(a)};e.exports=a}),null);
__d("BladeRunnerStreamHandler",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c,d){"use strict";this.$1=a||function(a){},this.$2=b||function(a){},this.$3=c||function(a){},this.$4=d||function(a){}}a.prototype.onData=function(a){"use strict";this.$1(a)};a.prototype.onStatusUpdate=function(a){"use strict";this.$2(a)};a.prototype.onLog=function(a){"use strict";this.$3(a)};a.prototype.onBatch=function(a){"use strict";this.$4(a)};e.exports=a}),null);
__d("BladeRunnerDeferredClient",["Promise","nullthrows","requireDeferred"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=null}a.prototype.requestStream=function(a,c,d){"use strict";this.$2();return b("nullthrows")(this.$1).then(function(b){return b.requestStream(a,c,d)})};a.prototype.logInfo=function(a){"use strict";this.$2();return b("nullthrows")(this.$1).then(function(b){b.logInfo(a)})};a.prototype.bumpCounter=function(a){"use strict";this.$2();return b("nullthrows")(this.$1).then(function(b){b.bumpCounter(a)})};a.prototype.$2=function(){"use strict";this.$1==null&&(this.$1=new(b("Promise"))(function(a){b("requireDeferred")("BladeRunnerClient").onReady(function(b){a(new b())})}))};e.exports=a}),null);
__d("isPromise",[],(function(a,b,c,d,e,f){"use strict";function a(a){return!!a&&typeof a.then==="function"}e.exports=a}),null);
__d("stableStringify",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function h(a){__p&&__p();var b=Array.isArray(a),c=g(a);if(b||c){c=Object.keys(a);if(c.length){c=c.sort().map(function(b){var c=a[b],d;g(c)||Array.isArray(c)?d=h(c):d=JSON.stringify(c);return b+":"+d});if(b)return"["+c.join(",")+"]";else return"{"+c.join(",")+"}"}}return JSON.stringify(a)}e.exports=h}),null);
__d("XHRHttpError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="HTTP_CLIENT_ERROR",h="HTTP_PROXY_ERROR",i="HTTP_SERVER_ERROR",j="HTTP_TRANSPORT_ERROR",k="HTTP_UNKNOWN_ERROR";a={HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k,getErrorCode:function(a,b){__p&&__p();if(b===0){a=a.getProtocol();return a==="file"||a==="ftp"?null:j}else if(b>=100&&b<200)return h;else if(b>=200&&b<300)return null;else if(b>=400&&b<500)return g;else if(b>=500&&b<600)return i;else if(b>=12001&&b<12156)return j;else return k}};e.exports=a}),null);
__d("xhrSimpleDataSerializer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}e.exports=a}),null);
__d("XHRRequest",["invariant","Env","ErrorUtils","ResourceTimingsStore","ResourceTypes","TimeSlice","URI","XHRHttpError","ZeroRewrites","getAsyncHeaders","ifRequired","xhrSimpleDataSerializer"],(function(a,b,c,d,e,f,g){__p&&__p();var h={loadedBytes:null,totalBytes:null};function a(a){"use strict";this.setURI(a),this.setResponseType(null),this.setMethod("POST"),this.setTransportBuilder(b("ZeroRewrites").getTransportBuilderForURI(this.getURI())),this.setDataSerializer(b("xhrSimpleDataSerializer")),this.$1=b("ResourceTimingsStore").getUID(b("ResourceTypes").XHR,a!=null?a.toString():"")}a.prototype.setURI=function(a){"use strict";this.$2=b("ZeroRewrites").rewriteURI(new(b("URI"))(a));return this};a.prototype.getURI=function(){"use strict";return this.$2};a.prototype.setResponseType=function(a){"use strict";this.$3=a;return this};a.prototype.setMethod=function(a){"use strict";this.$4=a;return this};a.prototype.getMethod=function(){"use strict";return this.$4};a.prototype.setData=function(a){"use strict";this.$5=a;return this};a.prototype.getData=function(){"use strict";return this.$5};a.prototype.setRawData=function(a){"use strict";this.$6=a;return this};a.prototype.setRequestHeader=function(a,b){"use strict";this.$7||(this.$7={});this.$7[a]=b;return this};a.prototype.setTimeout=function(a){"use strict";this.$8=a;return this};a.prototype.getTimeout=function(){"use strict";return this.$8};a.prototype.setResponseHandler=function(a){"use strict";this.$9=a;return this};a.prototype.getResponseHandler=function(){"use strict";return this.$9};a.prototype.setErrorHandler=function(a){"use strict";this.$10=a;return this};a.prototype.getErrorHandler=function(){"use strict";return this.$10};a.prototype.setNetworkFailureHandler=function(a){"use strict";this.$11=a;return this};a.prototype.getNetworkFailureHandler=function(){"use strict";return this.$11};a.prototype.getResponseHeader=function(a){"use strict";return this.$12.getResponseHeader(a)};a.prototype.setAbortHandler=function(a){"use strict";this.$13=a;return this};a.prototype.getAbortHandler=function(){"use strict";return this.$13};a.prototype.setTimeoutHandler=function(a){"use strict";this.$14=a;return this};a.prototype.getTimeoutHandler=function(){"use strict";return this.$14};a.prototype.setUploadProgressHandler=function(a){"use strict";this.$15=a;return this};a.prototype.setDownloadProgressHandler=function(a){"use strict";this.$16=a;return this};a.prototype.setTransportBuilder=function(a){"use strict";this.$17=a;return this};a.prototype.setDataSerializer=function(a){"use strict";this.$18=a;return this};a.prototype.send=function(){"use strict";__p&&__p();var a=this.$8,c=this.$17(),d=this.getURI(),e=new(b("URI"))(d).getQualifiedURI().toString(),f=this.$1;b("ResourceTimingsStore").updateURI(b("ResourceTypes").XHR,f,e);b("ResourceTimingsStore").measureRequestSent(b("ResourceTypes").XHR,f);this.$12=c;this.$4==="POST"||!this.$6||g(0,2346,this.$6,d);b("Env").force_param&&(this.$5=babelHelpers["extends"]({},this.getData()||{},b("Env").force_param));this.$4==="GET"||this.$6?(d.addQueryData(this.$5),e=this.$6):e=this.$18(this.$5);function h(a){b("ResourceTimingsStore").measureResponseReceived(b("ResourceTypes").XHR,f);for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.apply(this,d)}var i=b("TimeSlice").guard(b("ifRequired")("JSTracing",function(a){return a.wrap(h)},function(){return h}),"XHRRequest response received",{propagationType:b("TimeSlice").PropagationType.CONTINUATION});c.onreadystatechange=this.$19(i);c.onerror=this.$20(i);c.upload&&this.$15&&(c.upload.onprogress=this.$21.bind(this));this.$16&&(c.onprogress=this.$22.bind(this));a&&(this.$23=setTimeout(this.$24.bind(this),a));this.$25!==null&&this.$25!==void 0&&(c.withCredentials=this.$25);c.open(this.$4,d.toString(),!0);i=!1;if(this.$7)for(var j in this.$7)j.toLowerCase()==="content-type"&&(i=!0),c.setRequestHeader(j,this.$7[j]);this.$4=="POST"&&!this.$6&&!i&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var k=b("getAsyncHeaders")(d);Object.keys(k).forEach(function(a){c.setRequestHeader(a,k[a])});this.$3==="arraybuffer"&&("responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):"setRequestHeader"in c&&c.setRequestHeader("Accept-Charset","x-user-defined"));this.$3==="blob"&&(c.responseType=this.$3);c.send(e)};a.prototype.abort=function(a){"use strict";this.$26(),this.$13&&b("ErrorUtils").applyWithGuard(this.$13,null,[a],null,"XHRRequest:_abortHandler")};a.prototype.$26=function(){"use strict";var a=this.$12;a&&(a.onreadystatechange=null,a.abort());this.$27()};a.prototype.$24=function(){"use strict";this.$26(),this.$14&&b("ErrorUtils").applyWithGuard(this.$14,null,null,null,"XHRRequest:_abortHandler")};a.prototype.$28=function(a){"use strict";if(this.$3)if("response"in a)return a.response;else if(this.$3==="arraybuffer"&&window.VBArray)return window.VBArray(a.responseBody).toArray();return a.responseText};a.prototype.$20=function(a){"use strict";var c=this.$12;return function(){var d={errorCode:b("XHRHttpError").HTTP_TRANSPORT_ERROR,errorMsg:"Network Failure.",errorType:"Network",errorRawTransport:c.constructor&&c.constructor.name,errorRawTransportStatus:0};this.$11?b("ErrorUtils").applyWithGuard(a.bind(void 0,this.$11),null,[d],null,"XHRRequest:_networkFailureHandler"):a(function(){})}.bind(this)};a.prototype.$19=function(a){"use strict";__p&&__p();var c=b("TimeSlice").guard(function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(this,c)},"XHRRequest onreadystatechange",{propagationType:b("TimeSlice").PropagationType.EXECUTION});return function(){__p&&__p();var d=this.$12,e=d.readyState;if(e>=2){var f=e===4,g=this.getURI();g=b("XHRHttpError").getErrorCode(g,d.status);var h=this.$9;if(g!==null){if(f){g={errorCode:g,errorMsg:this.$28(d),errorRawTransport:d.constructor.name,errorRawTransportStatus:d.status,errorType:d.status?"HTTP "+d.status:"HTTP"};this.$10?b("ErrorUtils").applyWithGuard(a.bind(void 0,this.$10),null,[g],null,"XHRRequest:_errorHandler"):a(function(){})}}else if(h){g=null;h.includeHeaders&&(g=d.getAllResponseHeaders());if(f||h.parseStreaming&&e===3){e=f?a:c;b("ErrorUtils").applyWithGuard(e.bind(void 0,h),null,[this.$28(d),g,f],null,"XHRRequest:handler")}}else f&&a(function(){});f&&this.$27()}}.bind(this)};a.prototype.$21=function(a){"use strict";h.loadedBytes=a.loaded,h.totalBytes=a.total,this.$15&&b("ErrorUtils").applyWithGuard(this.$15,null,[h],null,"XHRRequest:_uploadProgressHandler")};a.prototype.$22=function(a){"use strict";a={loadedBytes:a.loaded,totalBytes:a.total};this.$16&&b("ErrorUtils").applyWithGuard(this.$16,null,[a],null,"XHRRequest:_downloadProgressHandler")};a.prototype.$27=function(){"use strict";clearTimeout(this.$23),delete this.$12};e.exports=a}),null);
__d("SimpleFBAuthenticatedXHRRequest",["invariant","CurrentUser","DTSG","DTSGUtils","ServerJSDefine","SprinkleConfig","XHRRequest","isFacebookURI"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=1;a=babelHelpers.inherits(j,b("XHRRequest"));h=a&&a.prototype;function j(a,c){"use strict";h.constructor.call(this,a);a={__dyn:b("ServerJSDefine").getLoadedModuleHash(),__req:(i++).toString(36),__ajax__:1,__a:1,__user:b("CurrentUser").getID()};h.setData.call(this,babelHelpers["extends"]({},c,a))}j.prototype.send=function(){"use strict";__p&&__p();if(!b("isFacebookURI")(this.getURI()))return h.send.call(this);if(b("DTSG").getCachedToken){var a=b("DTSG").getCachedToken();if(a)return this.sendOnDTSGToken(a);else{b("DTSG").getToken().done(function(a){return this.sendOnDTSGToken(a)}.bind(this));return this}}else this.sendOnDTSGToken(b("DTSG").getToken())};j.prototype.sendOnDTSGToken=function(a){"use strict";if(a){h.setData.call(this,babelHelpers["extends"]({},this.getData(),{fb_dtsg:a}));if(b("SprinkleConfig").param_name){var c;h.setData.call(this,babelHelpers["extends"]({},this.getData(),(c={},c[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(a),c)))}}return h.send.call(this)};j.prototype.setData=function(a){"use strict";g(0,5518)};j.parseResponse=function(a){"use strict";return JSON.parse(a.substr(9))};j.getPayload=function(a){"use strict";a=j.parseResponse(a).payload;return a.payload?a.payload:a};e.exports=j}),null);
__d("XFantailLogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/fantail/",{service:{type:"String",required:!0}})}),null);
__d("FantailLogQueue",["ChannelClientID","CircularBuffer","FantailConfig","PHPQuerySerializer","SimpleFBAuthenticatedXHRRequest","XFantailLogController","destroyOnUnload","setIntervalAcrossTransitions","sprintf"],(function(a,b,c,d,e,f){__p&&__p();var g={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};function h(a){"use strict";this.$2=a,this.$3=new(b("CircularBuffer"))(200),b("setIntervalAcrossTransitions")(this.$4.bind(this),30*1e3),b("destroyOnUnload")(this.$4.bind(this))}h.get=function(a){"use strict";h.$1=h.$1||{};h.$1[a]=h.$1[a]||new h(a);return h.$1[a]};h.prototype.debug=function(a){"use strict";for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.DEBUG,a].concat(c))};h.prototype.info=function(a){"use strict";for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.INFO,a].concat(c))};h.prototype.warn=function(a){"use strict";for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.WARN,a].concat(c))};h.prototype.error=function(a){"use strict";for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.ERROR,a].concat(c))};h.prototype.$5=function(a,c){"use strict";for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];var g=b("sprintf").apply(void 0,[c].concat(e));this.$3.write({log_time:Date.now(),log:g,severity:a,device_id:b("ChannelClientID").getID()})};h.prototype.$4=function(){"use strict";__p&&__p();var a=this.$3.read();if(a.length>0){var c={log_time:[],log:[],severity:[],device_id:[]};a.forEach(function(a){c.log_time.push(a.log_time),c.log.push(a.log),c.severity.push(a.severity),c.device_id.push(a.device_id)});this.$3.clear();a=b("XFantailLogController").getURIBuilder().setString("service",this.$2).getURI();new(b("SimpleFBAuthenticatedXHRRequest"))(a,c).setMethod("POST").setDataSerializer(b("PHPQuerySerializer").serialize).setRequestHeader("Content-Type","application/x-www-form-urlencoded").send()}};e.exports=h}),null);
__d("processRelaySRPayload",["ix","Bootloader","ServerJS","bx","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.js;a=a.sr;var d=a.resource_map,e=a.bootloadable,f=a.ixData,h=a.bxData,i=a.gkxData,j=a.qexData;a=a.allResources;d!=null&&b("Bootloader").setResourceMap(d);f!=null&&g.add(f);h!=null&&b("bx").add(h);i!=null&&b("gkx").add(i);j!=null&&b("qex").add(j);e!=null&&b("Bootloader").enableBootload(e);b("Bootloader").loadResources((d=a)!=null?d:[],function(){var a;new(b("ServerJS"))().handle((a=c)!=null?a:{})})}e.exports=a}),null);
__d("GraphQLSubscriptionsLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SYSTEM_SUBSCRIBE:"subscribe",SYSTEM_UNSUBSCRIBE:"unsubscribe",CLIENT_SUBSCRIBE:"client_subscribe",CLIENT_UNSUBSCRIBE:"client_unsubscribe",PUBLISH:"publish",SEND:"send",GENPAYLOAD:"genpayload",GENTOPIC:"gentopic",RECEIVEPAYLOAD:"receivepayload",RECEIVE_HEARTBEAT:"receive_heartbeat",RECEIVE_DEEP_ACK:"receive_deep_ack",CLIENT_RESUBSCRIBE:"client_resubscribe",REACH_MQTT_CLIENT_CHECKPOINT:"reach_mqtt_client_checkpoint",SSE_SUBSCRIBE_SUCCESS:"sse_subscribe_success",CLIENT_POLL_ATTEMPT:"client_poll_attempt",STATE_MACHINE_START:"state_start",STATE_MACHINE_RESUME:"state_resume",STATE_MACHINE_PAUSE:"state_pause",STATE_MACHINE_TERMINATE:"state_terminate"})}),null);
__d("GraphQLSubscriptionsMechanism",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SKYWALKER:"skywalker"})}),null);
__d("QuickLogConfigHelper",["QuickLogConfig"],(function(a,b,c,d,e,f){a.prototype.getEventDetails=function(a){"use strict";var c=null;b("QuickLogConfig").qpl_events?c=b("QuickLogConfig").qpl_events[a]:b("QuickLogConfig").qpl_events_static&&(c=b("QuickLogConfig").qpl_events_static[a]);return c};function a(){"use strict"}e.exports=new a()}),null);
__d("QuickLogEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({655575:{moduleName:"FEED",name:"CONSUMPTION_RESTORATION_WWW",sampleRate:1},655576:{moduleName:"FEED",name:"IMAGE_LOAD_WWW",sampleRate:5e3},655584:{moduleName:"FEED",name:"NOTIFICATION_INTERACTION_WWW",sampleRate:1},655585:{moduleName:"FEED",name:"COMMENT_TTL_WWW",sampleRate:250},655595:{moduleName:"FEED",name:"MAIN_THREAD_PERFORMANCE",sampleRate:1},655596:{moduleName:"FEED",name:"LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW",sampleRate:50},655597:{moduleName:"FEED",name:"LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW",sampleRate:100},3735589:{moduleName:"UFI",name:"UFI_OPTIMISTIC_COMMENT",sampleRate:100},3735590:{moduleName:"UFI",name:"UFI2_OPTIMISTIC_COMMENT",sampleRate:1},3735591:{moduleName:"UFI",name:"UFI_PERSISTED_COMMENT",sampleRate:100},3735592:{moduleName:"UFI",name:"UFI2_PERSISTED_COMMENT",sampleRate:1},3735593:{moduleName:"UFI",name:"UFI2_OPTIMISTIC_COMMENT_EDIT",sampleRate:1},3735594:{moduleName:"UFI",name:"UFI2_PERSISTED_COMMENT_EDIT",sampleRate:1},3735595:{moduleName:"UFI",name:"UFI_TOP_LEVEL_COMMENTS_PAGINATION",sampleRate:100},3735596:{moduleName:"UFI",name:"UFI2_TOP_LEVEL_COMMENTS_PAGINATION",sampleRate:1},3735597:{moduleName:"UFI",name:"UFI2_REPLY_COMMENTS_PAGINATION",sampleRate:1},3735598:{moduleName:"UFI",name:"UFI_SHARE_DIALOG_OPENS",sampleRate:100},3735599:{moduleName:"UFI",name:"UFI2_SHARE_DIALOG_OPENS",sampleRate:1},3735600:{moduleName:"UFI",name:"UFI_COMPOSER_INPUT_FOCUS",sampleRate:100},3735601:{moduleName:"UFI",name:"UFI_STORY_REACTION",sampleRate:100},3735602:{moduleName:"UFI",name:"UFI2_STORY_REACTION",sampleRate:1},3735603:{moduleName:"UFI",name:"UFI2_COMMENT_REACTION",sampleRate:1},3735604:{moduleName:"UFI",name:"UFI_COMMENT_REACTION",sampleRate:100},3735605:{moduleName:"UFI",name:"UFI_COMPOSER_KEYPRESS_LATENCY",sampleRate:100},3735606:{moduleName:"UFI",name:"UFI2_COMPOSER_KEYPRESS_LATENCY",sampleRate:1},3735608:{moduleName:"UFI",name:"UFI_SHARE_TOOLTIP_OPENS",sampleRate:250},3735609:{moduleName:"UFI",name:"UFI2_SHARE_TOOLTIP_OPENS",sampleRate:250},3735610:{moduleName:"UFI",name:"UFI_STORY_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735611:{moduleName:"UFI",name:"UFI2_STORY_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735612:{moduleName:"UFI",name:"UFI_STORY_REACTIONS_COUNT_TOOLTIP_OPENS",sampleRate:250},3735613:{moduleName:"UFI",name:"UFI2_STORY_REACTIONS_COUNT_TOOLTIP_OPENS",sampleRate:250},3735614:{moduleName:"UFI",name:"UFI_COMMENT_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735615:{moduleName:"UFI",name:"UFI2_COMMENT_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735616:{moduleName:"UFI",name:"UFI_COMMENT_COUNT_TOOLTIP_OPENS",sampleRate:250},3735617:{moduleName:"UFI",name:"UFI2_COMMENT_COUNT_TOOLTIP_OPENS",sampleRate:250},7733270:{moduleName:"ADS_MANAGER",name:"ADS_CHANGE_LEVEL_WWW",sampleRate:100},7733271:{moduleName:"ADS_MANAGER",name:"OPTIMAL_STRATEGY_ELIGIBLE_CAMPAIGNS_TTI",sampleRate:1},7995396:{moduleName:"RELAY",name:"UNSAFE_SUBSCRIPTIONS_TEST",sampleRate:100},7995398:{moduleName:"RELAY",name:"UNSAFE_SYNC_TEST",sampleRate:100},7995399:{moduleName:"RELAY",name:"UNSAFE_ASYNC_TEST",sampleRate:100},7995400:{moduleName:"RELAY",name:"RUNTIME_SUBSCRIPTIONS",sampleRate:1},7995401:{moduleName:"RELAY",name:"NETWORK_FETCH_QUERY",sampleRate:1},7995402:{moduleName:"RELAY",name:"RUNTIME_GC",sampleRate:1},7995403:{moduleName:"RELAY",name:"RUNTIME_NOTIFY",sampleRate:100},7995404:{moduleName:"RELAY",name:"RESPONSE_NORMALIZER_NORMALIZE",sampleRate:100},7995408:{moduleName:"RELAY",name:"LOAD_ALL_PROJECTS_AIP",sampleRate:100},11075606:{moduleName:"MARKETPLACE",name:"REACT_TTI_WWW",sampleRate:100},11075638:{moduleName:"MARKETPLACE",name:"BROWSE_FEED_PAGINATION_WWW",sampleRate:1},11075649:{moduleName:"MARKETPLACE",name:"BROWSE_TTI_WWW",sampleRate:1},11075653:{moduleName:"MARKETPLACE",name:"SEARCH_TTI_WWW",sampleRate:1},12517384:{moduleName:"ABOUTPAGE",name:"Z_AMPERANDY_TEST_WWW",sampleRate:0},12845073:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_REACT_RENDER",sampleRate:1},12845074:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_REACT_ASYNC_ACTION",sampleRate:1},12845075:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_ASYNC_ACTION",sampleRate:null},13238313:{moduleName:"STORIES",name:"STORY_VIEWER_LOAD_TTI_WWW",sampleRate:100},13238314:{moduleName:"STORIES",name:"STORY_VIEWER_LOAD_FIRST_TIME_WWW",sampleRate:100},14549005:{moduleName:"LIVE",name:"VIDEO_COMPONENT_TTL",sampleRate:null},19202053:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_CARD_WWW",sampleRate:100},19202054:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_PAGE_SUMMARY_WWW",sampleRate:1},19202055:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_MOST_RECENT_POST_WWW",sampleRate:10},19202056:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_ALL_POSTS_PUBLISHED_WWW",sampleRate:10},19202057:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_WHEN_FANS_ONLINE_WWW",sampleRate:10},19202058:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_BEST_POSTS_WWW",sampleRate:10},19202059:{moduleName:"PAGES_INSIGHTS",name:"POST_TAB_PAGE_YOU_WATCH_WWW",sampleRate:10},19202060:{moduleName:"PAGES_INSIGHTS",name:"LIKES_TAB_LOAD_WWW",sampleRate:10},19202061:{moduleName:"PAGES_INSIGHTS",name:"LIKES_TAB_UPDATE_WWW",sampleRate:10},19202062:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_LOAD_WWW",sampleRate:10},19202063:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_UPDATE_WWW",sampleRate:10},19202064:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_REACTION_LOAD_WWW",sampleRate:10},19202065:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_REACTION_UPDATE_WWW",sampleRate:10},19202066:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_ALL_POSTS_SEE_MORE_WWW",sampleRate:10},19202067:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_NEW_PAGE_SUMMARY_WWW",sampleRate:1},19202068:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_WWW",sampleRate:1},19202069:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_UPDATED_WWW",sampleRate:100},19202070:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_TARGET_WWW",sampleRate:1},20578316:{moduleName:"GROUPS_ADMIN",name:"MEMBER_REQUESTS_TTI_WWW",sampleRate:0},22347782:{moduleName:"STORIES_ARCHIVE",name:"ARCHIVE_GRID_TTI_WWW",sampleRate:100},23265284:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_FLOW_WWW",sampleRate:1},23265285:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_LAUNCH_BY_PRODUCT_WWW",sampleRate:1},23265286:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"PAY_FLOW_WWW",sampleRate:1},23265287:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_INFORMATION_API",sampleRate:1},23855105:{moduleName:"UNIDASH",name:"INIT_LOAD_WWW",sampleRate:1},23855106:{moduleName:"UNIDASH",name:"WIDGET_LOAD_START_WWW",sampleRate:1},23855107:{moduleName:"UNIDASH",name:"WIDGET_LOAD_END_WWW",sampleRate:1},23855108:{moduleName:"UNIDASH",name:"PAGE_LOAD_END_WWW",sampleRate:1},23855109:{moduleName:"UNIDASH",name:"TAB_NAV_START_WWW",sampleRate:1},23855110:{moduleName:"UNIDASH",name:"CLEAN_LOAD_WWW",sampleRate:1},23855111:{moduleName:"UNIDASH",name:"WIDGET_LOAD_WWW",sampleRate:1},23855112:{moduleName:"UNIDASH",name:"TAB_NAV_WWW",sampleRate:1},24117249:{moduleName:"SRT",name:"TIME_TO_FIRST_JOB_WWW",sampleRate:1},24117250:{moduleName:"SRT",name:"PAGE_NAVIGATION_START_WWW",sampleRate:0},24117251:{moduleName:"SRT",name:"TIME_TO_NEXT_JOB_WWW",sampleRate:1},25296897:{moduleName:"MESSENGER_WEB",name:"FIRSTCHATTABOPEN_WWW",sampleRate:1},25296898:{moduleName:"MESSENGER_WEB",name:"GROUP_INPUT_TAB_OPEN_WWW",sampleRate:0},25296899:{moduleName:"MESSENGER_WEB",name:"GROUP_INPUT_INDIVIDUAL_TAB_OPEN_WWW",sampleRate:null},25296900:{moduleName:"MESSENGER_WEB",name:"COMPOSER_INTERACTION",sampleRate:null},25296901:{moduleName:"MESSENGER_WEB",name:"PAGE_LOAD_MDOTCOM_WWW",sampleRate:1},25296902:{moduleName:"MESSENGER_WEB",name:"THREAD_LOAD_MDOTCOM_WWW",sampleRate:1},25296903:{moduleName:"MESSENGER_WEB",name:"SEND_MESSAGE",sampleRate:null},25296904:{moduleName:"MESSENGER_WEB",name:"FETCH_THREAD_INFO",sampleRate:null},25296905:{moduleName:"MESSENGER_WEB",name:"FETCH_THREAD_LIST",sampleRate:null},25296906:{moduleName:"MESSENGER_WEB",name:"FETCH_MORE_THREAD_LIST",sampleRate:null},25493505:{moduleName:"TAHOE",name:"TAHOE_MEDIA_DONE",sampleRate:null},25493506:{moduleName:"TAHOE",name:"TAHOE_DISPLAY_DONE",sampleRate:null},25952260:{moduleName:"NAVIGATION",name:"ASYNC_NAVIGATION_MTOUCH",sampleRate:1},26476545:{moduleName:"WWW_PROFILE",name:"TIMELINE_TAIL_LOAD_WWW",sampleRate:1},26804225:{moduleName:"WIKTORK_TEST",name:"WIKTORK_EVENT_ONE_XD",sampleRate:0},26804227:{moduleName:"WIKTORK_TEST",name:"WIKTORK_TEST_THREE",sampleRate:0},26804230:{moduleName:"WIKTORK_TEST",name:"WIKTORK_TEST_ELEVEN",sampleRate:0},26804231:{moduleName:"WIKTORK_TEST",name:"WIKTORK_TEST_LOL",sampleRate:10},26869761:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_INITIAL_LOAD",sampleRate:1},26869762:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_FEED_LOAD",sampleRate:1},26869763:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_CONTEXT_SWITCH",sampleRate:1},26869764:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_LOADING_EVENT",sampleRate:0},27459585:{moduleName:"IG_WEB",name:"IG_FEED_LOAD",sampleRate:1e4},27459586:{moduleName:"IG_WEB",name:"IG_FEED_LOAD_MORE",sampleRate:1e4},27459587:{moduleName:"IG_WEB",name:"EMBED_LOAD",sampleRate:1e3},27459588:{moduleName:"IG_WEB",name:"APP_START",sampleRate:1e3},27983873:{moduleName:"COMET_VISUAL_COMPLETION",name:"COMET_VISUALLY_COMPLETE_WWW",sampleRate:1},27983874:{moduleName:"COMET_VISUAL_COMPLETION",name:"COMET_SPEED_INDEX_WWW",sampleRate:1},27983875:{moduleName:"COMET_VISUAL_COMPLETION",name:"BLUE_VISUALLY_COMPLETE_WWW",sampleRate:1},27983876:{moduleName:"COMET_VISUAL_COMPLETION",name:"BLUE_SPEED_INDEX_WWW",sampleRate:1},28377089:{moduleName:"DELTOID_METRIC_MONITOR",name:"QUERY_RESULTS",sampleRate:0},28770305:{moduleName:"NEWPULSE",name:"THRIFT_CALL_WWW",sampleRate:0},29294593:{moduleName:"QE",name:"QE2_LOAD",sampleRate:1},29818881:{moduleName:"COMET_STARTUP",name:"INITIAL_LOAD",sampleRate:1},29818882:{moduleName:"COMET_STARTUP",name:"NAVIGATION",sampleRate:1},29818883:{moduleName:"COMET_STARTUP",name:"INITIAL_LOAD_SERVER",sampleRate:1},29818884:{moduleName:"COMET_STARTUP",name:"TAIL_LOAD",sampleRate:1},29884421:{moduleName:"NPX",name:"NUX_FRIEND_SUGGESTIONS_LOAD_TIME_MTOUCH",sampleRate:10},29884422:{moduleName:"NPX",name:"NUX_FRIEND_REQUESTS_LOAD_TIME_MTOUCH",sampleRate:10},29884423:{moduleName:"NPX",name:"NUX_PROFILE_PICTURE_LOAD_TIME_MTOUCH",sampleRate:10},29884424:{moduleName:"NPX",name:"NUX_APP_INSTALL_LOAD_TIME_MTOUCH",sampleRate:10},29884425:{moduleName:"NPX",name:"NUX_CONTACT_IMPORTER_TTI_WWW",sampleRate:10},29884426:{moduleName:"NPX",name:"NUX_PYMK_TTI_WWW",sampleRate:10},29949953:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_ALL_PROJECTS_WWW",sampleRate:1},29949954:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_ALL_PROJCTS_WWW",sampleRate:1},29949955:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_PROJECTS_TABLE_WWW",sampleRate:1},30408705:{moduleName:"TASKS",name:"GRAPHQL_MUTATION_WWW",sampleRate:10},30605313:{moduleName:"COMET_INTERACTION_TRACING",name:"HOME_FEED_TAILLOAD",sampleRate:1},30605314:{moduleName:"COMET_INTERACTION_TRACING",name:"NOTIFICATION_PAGINATION",sampleRate:1},30605315:{moduleName:"COMET_INTERACTION_TRACING",name:"TIMELINE_FEED_TAILLOAD",sampleRate:1}})}),null);
__d("QuickPerformanceLogger",["requireCond","cr:684019"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:684019")}),null);
__d("QuickPerformanceLoggerBase",["Arbiter","Banzai","Bootloader","Env","PerfXSharedFields","QuickLogConfig","QuickLogConfigHelper","Random","gkx","performanceAbsoluteNow","performanceNavigationStart","requireCond","cr:682175"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("performanceAbsoluteNow")();function a(a){a===void 0&&(a={}),this.$1={},this.$2={},this.$3=100,this.loomProviderId="QPL",this.$4=a,b("cr:682175")&&b("cr:682175").addProvider(this)}a.prototype.$7=function(a,c){if(b("QuickLogConfig").killswitch)return null;a=this.$1[a];if(!a)return null;a=a[c];return!a?null:a};a.prototype.markerStart=function(a,c,d){__p&&__p();c===void 0&&(c=0);d===void 0&&(d=this.currentTimestamp());if(b("QuickLogConfig").killswitch)return;var e=b("QuickLogConfigHelper").getEventDetails(a);if(!e)return;if(b("cr:682175")&&!this.$5){var f=a+"_"+c,g=new Set(["QPL"]);b("cr:682175").startTrace(f,"QPL",g)}this.$5&&this.$5.buffer.addEvent({type:"QPL_START",action:"START",markerId:a,instanceKey:c},d);f=this.$6===a?1:this.$2[a]||e.sampleRate||this.$3;g=b("Env").enable_qplinspector||b("Random").coinflip(f);e=this.$1[a];e||(this.$1[a]={});this.$1[a][c]={passesSampling:g,timestamp:d,sampleRate:f,points:{}};if(g){e=this.$4.onMarkerStart;e&&e(a,c,d)}};a.prototype.markerStartFromNavStart=function(a,c){c===void 0&&(c=0);var d=b("performanceNavigationStart")();this.markerStart(a,c,d);if(b("performanceNavigationStart").isPolyfilled){d=this.$7(a,c);d&&(d.timestampIsApproximate=!0)}};a.prototype.annotateMarkerString=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotations||{};f[b]=c;e.annotations=f};a.prototype.annotateMarkerStringArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsStringArray||{};f[b]=c;e.annotationsStringArray=f};a.prototype.annotateMarkerInt=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsInt||{};f[b]=c;e.annotationsInt=f};a.prototype.annotateMarkerIntArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsIntArray||{};f[b]=c;e.annotationsIntArray=f};a.prototype.annotateMarkerDouble=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDouble||{};f[b]=c;e.annotationsDouble=f};a.prototype.annotateMarkerDoubleArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDoubleArray||{};f[b]=c;e.annotationsDoubleArray=f};a.prototype.markerPoint=function(a,b,c,d,e){d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());a=this.$7(a,d);if(!a)return;a.points[b]={data:c,timeSinceStart:e-a.timestamp}};a.prototype.markerEnd=function(a,c,d,e){__p&&__p();d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());var f=Date.now(),h=b("QuickLogConfigHelper").getEventDetails(a);if(!h)return;var i=this.$5;if(i){i.buffer.addEvent({type:"QPL_END",action:c,markerId:a,instanceKey:d},e);var j=a+"_"+d;b("cr:682175")&&i.triggerId===j&&b("cr:682175").endTraceWithTimeout(j,3e4)}i=this.$7(a,d);if(!i)return;if(i.passesSampling){j=this.$4.onMarkerEnd;j&&j(a,d,e);j=e-i.timestamp;f=f-j;var k=i.points;this.$8({event_is_intermediate_marker:"false",instance_id:d,quicklog_module:h.moduleName,quicklog_event:h.name,quicklog_action:c,sample_rate:i.sampleRate,trace_tags:"",value:i.timestampIsApproximate?null:j,annotations:i.annotations,annotations_double:i.annotationsDouble,annotations_double_array:i.annotationsDoubleArray,annotations_int:i.annotationsInt,annotations_int_array:i.annotationsIntArray,annotations_string_array:i.annotationsStringArray,points:Object.keys(k).map(function(a){return{data:k[a].data,name:a,timeSinceStart:k[a].timeSinceStart}}),metadata:{application_analytics:{time_since_qpl_module_init:e-g}}},f);this.$6===a&&(console.timeStamp("QPLDebug MarkerEnd, "+this.currentTimestamp()+", "+f+", "+j),b("Arbiter").inform("qpl_debugger_finished"))}delete this.$1[a][d]};a.prototype.markerDrop=function(a,b){b===void 0&&(b=0);a=this.$1[a];a&&delete a[b]};a.prototype.dropAllMarkers=function(){this.$1={}};a.prototype.setAlwaysOnSampleRate=function(a,b){this.$2[a]=b};a.prototype.setSampleRateForInstance=function(a,b,c){c===void 0&&(c=0);a=this.$1[a][c];a&&(a.sampleRate=b)};a.prototype.currentTimestamp=function(){return b("performanceAbsoluteNow")()};a.prototype.$8=function(a,c){a=this.$9(a);var d=this.$10(a,c);b("Env").enable_qplinspector&&b("Bootloader").loadModules(["QPLInspector"],function(a){a.appendLog(d)},"QuickPerformanceLoggerBase");b("gkx")("708253")?b("Banzai").post("perf",d,b("Banzai").VITAL):b("Banzai").post("perf",d)};a.prototype.$9=function(a){var c=b("PerfXSharedFields").getCommonData();a.metadata=babelHelpers["extends"]({},a.metadata,{memory_stats:{total_mem:c.ram_gb?c.ram_gb*1073741824:null},network_stats:{downlink_megabits:c.downlink_megabits,network_subtype:c.effective_connection_type,rtt_ms:c.rtt_ms}});return a};a.prototype.$10=function(a,b){b=Math.floor(b/1e3);return{appversion:"0 (web)",clienttime:b,rawclienttime:b,deviceid:"0",extra:a}};a.prototype.loomTraceDidBegin=function(a){this.$5=a};a.prototype.loomTraceWillEnd=function(){this.$5=null};a.prototype.enableDebug=function(a){this.$6=parseInt(a,10)};a.prototype.disableDebug=function(){this.$6=null};e.exports=a}),null);
__d("QuickPerformanceLoggerImpl",["EventProfiler","QuickLogConfig","QuickPerformanceLoggerBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={},i={onMarkerStart:function(a,c,d){var e=b("QuickLogConfig").qpl_to_interaction[a];if(e){a=a+" : "+c;h[a]=b("EventProfiler").markManualStart([e.name],e.eventType,d)}},onMarkerEnd:function(a,b,c){a=a+" : "+b;h[a]&&h[a].markManualEnd(c)}};c=babelHelpers.inherits(a,b("QuickPerformanceLoggerBase"));g=c&&c.prototype;function a(){g.constructor.call(this,i)}e.exports=new a()}),null);
__d("StreamStateMachineConstants",[],(function(a,b,c,d,e,f){"use strict";a={states:{GQLS_STATE_CREATED:"created",GQLS_STATE_ACTIVE:"active",GQLS_STATE_PAUSED:"paused",GQLS_STATE_TERMINATED:"terminated"},events:{GQLS_STATE_TRANSIT_ON_CREATE:"onCreated",GQLS_STATE_TRANSIT_ON_ACTIVE:"onActive",GQLS_STATE_TRANSIT_ON_PAUSE:"onPause",GQLS_STATE_TRANSIT_ON_RESUME:"onResume",GQLS_STATE_TRANSIT_ON_TERMINATE:"onTerminate"}};e.exports=a}),null);
__d("SkywalkerManager",["regeneratorRuntime","Promise","BladeRunnerDeferredClient","BladeRunnerStreamHandler","BladeRunnerTypes","Bootloader","StreamStateMachineConstants","gkx","nullthrows","promiseDone","requireDeferred"],(function(a,b,c,d,e,f){__p&&__p();var g=b("BladeRunnerTypes").StreamStatus;c=b("StreamStateMachineConstants").events;var h="request_stream",i="cp_skywalker",j="mqtt_skywalker",k=babelHelpers["extends"]({},c,{GQLS_STATE_TRANSIT_ON_REJECT:"onReject"});function a(){"use strict";this.$1=new(b("BladeRunnerDeferredClient"))(),this.$4=!1}a.prototype.subscribe=function(a,c,d){__p&&__p();d===void 0&&(d={});var e=this.$6(a,c,d);b("promiseDone")(e);return{getTopic:function(){return a},getContext:function(){return d.context},isUnsubscribed:function(){return this.$7},unsubscribe:function(){this.$7=!0;return e.then(function(a){return a.unsubscribe()})},$7:!1}};a.prototype.getSubscriptionType=function(a){"use strict";if(this.$8(a))return h;else if(this.$9(a))return j;return i};a.prototype.getSubscriptions=function(){"use strict";__p&&__p();var a=[],b=[],c=this.$3;c!=null&&(a=c.getSubscriptions().map(function(a){return{getTopic:function(){return a.getTopic()},getMessageListener:function(){return a.getMessageListener()},getCreationTime:function(){return a.getCreationTime()},isUnsubscribed:function(){return!c.isSubscribed(a)}}}));var d=this.$2;d!=null&&(b=d.getSubscriptions().map(function(a){return{getTopic:function(){return a.getTopic()},getMessageListener:function(){return a.getMessageListener()},getCreationTime:function(){return a.getCreatedTime()},isUnsubscribed:function(){return!a.isAlive()}}}));return a.concat(b)};a.prototype.$6=function(a,c,d){"use strict";__p&&__p();var e;return b("regeneratorRuntime").async(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:e=this.getSubscriptionType(a);if(!(e===h)){b.next=5;break}return b.abrupt("return",this.$10(a,c,d));case 5:if(!(e===j)){b.next=9;break}return b.abrupt("return",this.$11(a,c,d));case 9:return b.abrupt("return",this.$12(a,c,d));case 10:case"end":return b.stop()}},null,this)};a.prototype.$11=function(a,c,d){"use strict";__p&&__p();var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.$13());case 2:e=f.sent;return f.abrupt("return",e.subscribe(a,c,d));case 4:case"end":return f.stop()}},null,this)};a.prototype.$12=function(a,c,d){"use strict";__p&&__p();var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(this.$14());case 2:e=g.sent;f=e.subscribe(a,c,d.context,d.onSubscribe,d.onUnsubscribeEager,d.onUnsubscribe);d.gqlsLifecycleHandler&&f.handleLifecycles(d.gqlsLifecycleHandler);return g.abrupt("return",f);case 6:case"end":return g.stop()}},null,this)};a.prototype.$9=function(a){"use strict";if(this.$4||!l())return!1;if(a.startsWith("gqls/")||a.startsWith("graphql/")){if(a.startsWith("gqls/comment_like_subscribe")&&b("gkx")("781618"))return!0;return a.startsWith("gqls/live_video_currently_watching_subscribe")?!1:b("gkx")("781619")}return b("gkx")("678255")};a.prototype.$8=function(a){"use strict";return l()&&this.$15(a)!=null};a.prototype.$15=function(a){"use strict";if(a.startsWith("gqls/feedback_like_subscribe/"))return b("gkx")("683301")?"GqlsFeedbackLikeSubscribe":null;if(a.startsWith("gqls/live_video_comment_create_subscribe/"))return b("gkx")("688302")&&b("gkx")("688303")?"GqlsLiveVideoCommentCreateSubscribe":null;if(a.startsWith("gqls/web_notification_receive_subscribe/"))return b("gkx")("730685")?"GqlsWebNotificationReceiveSubscribe":null;return a.startsWith("gqls/comment_create_subscribe/")||a.startsWith("gqls/comment_like_subscribe/")||a.startsWith("gqls/feedback_typing_subscribe/")?b("gkx")("778404")?"Gqls":null:null};a.prototype.$10=function(a,c,d){"use strict";__p&&__p();var e,f,h,i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:e=b("nullthrows")(this.$15(a));j.next=3;return b("regeneratorRuntime").awrap(this.$16());case 3:f=j.sent;h=f.patchContext(d.context);j.next=7;return b("regeneratorRuntime").awrap(this.$1.requestStream({method:e,topic:a},JSON.stringify(h),new(b("BladeRunnerStreamHandler"))(function(b){this.$1.bumpCounter("received_data."+e);b=JSON.parse(b);c({topic:a,payload:b.payload})}.bind(this),function(a){__p&&__p();this.$1.bumpCounter("received_status_"+a+"."+e);if(d.gqlsLifecycleHandler){var b="";switch(a){case g.ACCEPTED:b=k.GQLS_STATE_TRANSIT_ON_CREATE;break;case g.REJECTED:b=k.GQLS_STATE_TRANSIT_ON_REJECT;break;case g.STARTED:b=k.GQLS_STATE_TRANSIT_ON_ACTIVE;break;case g.PAUSED:b=k.GQLS_STATE_TRANSIT_ON_PAUSE;break;case g.CLOSED:b=k.GQLS_STATE_TRANSIT_ON_TERMINATE;break}d.gqlsLifecycleHandler(b)}}.bind(this),function(a){})));case 7:i=j.sent;d.onSubscribe&&d.onSubscribe({data:{},error:null});return j.abrupt("return",{unsubscribe:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:d.onUnsubscribeEager&&d.onUnsubscribeEager(),i.cancel(),d.onUnsubscribe&&d.onUnsubscribe({data:{},error:null});case 3:case"end":return a.stop()}},null,this)}});case 10:case"end":return j.stop()}},null,this)};a.prototype.$14=function(){"use strict";__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(this.$2!=null)){d.next=2;break}return d.abrupt("return",this.$2);case 2:a=new(b("Promise"))(function(a){b("Bootloader").loadModules(["ChannelManager","RTISubscriptionManager"],function(b,c){b.startChannelManager(),a(c)},"SkywalkerManager")});d.next=5;return b("regeneratorRuntime").awrap(a);case 5:c=d.sent;this.$2=c;return d.abrupt("return",c);case 8:case"end":return d.stop()}},null,this)};a.prototype.$13=function(){"use strict";__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(this.$3!=null)){d.next=2;break}return d.abrupt("return",this.$3);case 2:a=new(b("Promise"))(function(a){b("Bootloader").loadModules(["MqttSkywalkerManager"],a,"SkywalkerManager")});d.next=5;return b("regeneratorRuntime").awrap(a);case 5:c=d.sent;this.$3=c;this.$3.setOnMqttError(function(a){return this.$17()}.bind(this));return d.abrupt("return",c);case 9:case"end":return d.stop()}},null,this)};a.prototype.$16=function(){"use strict";__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(this.$5!=null)){d.next=2;break}return d.abrupt("return",this.$5);case 2:a=new(b("Promise"))(function(a){b("requireDeferred")("SkywalkerUtils").onReady(function(b){a(b)})});d.next=5;return b("regeneratorRuntime").awrap(a);case 5:c=d.sent;this.$5=c;return d.abrupt("return",c);case 8:case"end":return d.stop()}},null,this)};a.prototype.$17=function(){"use strict";__p&&__p();this.$4=!0;var a=this.$3;if(a==null)return;a=a.getSubscriptions();this.$3=null;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.subscribe(d.getTopic(),d.getMessageListener(),d.getSubscribeOptions())}};function l(){return"WebSocket"in window}e.exports=new a()}),null);
__d("SkywalkerUtils",["CurrentLocale","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f){__p&&__p();a={patchContext:function(a){a=a||{};a.locale=b("CurrentLocale").get();if(b("RTISubscriptionManagerConfig").assimilator){var c=b("RTISubscriptionManagerConfig").assimilator;c.tierType!=null&&(a.tierType=c.tierType);c.sandboxIP!=null&&c.sandboxPort!=null&&c.sandboxHostname!=null&&(a.sandboxIP=c.sandboxIP,a.sandboxPort=c.sandboxPort,a.sandboxHostname=c.sandboxHostname)}return a}};e.exports=a}),null);
__d("RelayRuntime",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";e.exports=b("relay-runtime")}),null);
__d("createChunkedResponseParser",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="\r\n",i=2;function a(a,b){__p&&__p();var c=0,d=function(d,e,f){__p&&__p();b&&(d=b(d),d==null||typeof d==="string"||g(0,4071));if(d){var j=d.length;while(c<j){var k=d.indexOf(h,c);if(k<0)if(f)k=j;else break;k=d.slice(c,k);c+=k.length+i;a(k,e,f&&c>=j)}}else f&&a("",e,!0)};d.parseStreaming=!0;return d}e.exports=a}),null);
__d("getRelayAPIRequestHandler",["ifRequired","requireCond","cr:696703"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(b("cr:696703")){var c=b("cr:696703").getCallbackScheduler(),d=a;a=function(){for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];c(b("ifRequired")("JSTracing",function(a){return a.wrap(function(){return d.apply(void 0,e)})},function(){return function(){return d.apply(void 0,e)}}))}}return a}e.exports=a}),null);
__d("RelayAPIRequest",["invariant","RelayAPIConfig","URI","XHRHttpError","XHRRequest","createChunkedResponseParser","forEachObject","getRelayAPIRequestHandler","getSameOriginTransport","warning"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return a===b("XHRHttpError").HTTP_TRANSPORT_ERROR||a===b("XHRHttpError").HTTP_SERVER_ERROR}function a(a){this.$1=!1,this.setURI(a),this.setMethod("POST"),this.setTransportBuilder(b("getSameOriginTransport"))}a.prototype.setURI=function(a){this.$1&&g(0,2124);this.$2=new(b("URI"))(a);return this};a.prototype.setMethod=function(a){this.$1&&g(0,2125);this.$3=a;return this};a.prototype.setData=function(a){this.$1&&g(0,2126);this.$4=a;return this};a.prototype.setRawData=function(a){this.$1&&g(0,2127);this.$5=a;return this};a.prototype.setTrackingName=function(a){this.$8=a;return this};a.prototype.setRequestHeaders=function(a){this.$1&&g(0,2128);this.$6=a;return this};a.prototype.setTransportBuilder=function(a){this.$1&&g(0,2129);var b=a;this.$9=function(){var a=b();a.setTrackingName&&a.setTrackingName(this.$8);return a}.bind(this);return this};a.prototype.setResponseFilter=function(a){this.$1&&g(0,2130);this.$10=a;return this};a.prototype.setResponseChunkHandler=function(a){this.$1&&g(0,2131);this.$11=a;return this};a.prototype.setErrorHandler=function(a){this.$1&&g(0,2132);this.$12=a;return this};a.prototype.setTimeoutHandler=function(a){this.$1&&g(0,2133);this.$13=a;return this};a.prototype.setSkipRetry=function(a){this.$7=a;return this};a.prototype.send=function(){__p&&__p();this.$1&&g(0,2134);this.$1=!0;if(!this.$2||!this.$2.toString()){this.$12&&this.$12({errorCode:"HTTP_CLIENT_ERROR",errorType:"HTTP",errorMsg:"No uri provided - make sure RelayAPIConfig is properly setup."});return{abort:function(){}}}var a,c=0,d=0,e=function(){return!this.$7&&c<=b("RelayAPIConfig").retryDelays.length}.bind(this);function f(){var e=b("RelayAPIConfig").retryDelays[c-1];e=d+e;var f=setTimeout(function(){a=i()},e-Date.now());a={abort:function(){clearTimeout(f)}}}var i=function(){__p&&__p();c++;d=Date.now();var a;this.$11&&(a=b("createChunkedResponseParser")(this.$11,this.$10),a=b("getRelayAPIRequestHandler")(a));var g=this.$12,i=function(a){e()&&h(a.errorCode)?(b("warning")(!1,"RelayAPIRequest: Transient HTTP error, retrying. %s %s %s",a.errorType||"",a.errorCode||"",a.errorMsg||""),f()):g&&g(a)},j=this.$13,k=function(){e()?(b("warning")(!1,"RelayAPIRequest: HTTP timeout, retrying."),f()):j&&j()};b("warning")(this.$8,"All requests should have setTrackingName invoked for analytics and debugging.");var l=new(b("XHRRequest"))(this.$2).setMethod(this.$3).setData(this.$4).setTransportBuilder(this.$9).setErrorHandler(i).setResponseHandler(a).setTimeout(b("RelayAPIConfig").fetchTimeout).setTimeoutHandler(k);this.$5!=null&&l.setRawData(this.$5);this.$6&&b("forEachObject")(this.$6,function(a,b){l.setRequestHeader(b,a)});l.send();return l}.bind(this);a=i();return{abort:function(){a&&a.abort()}}};e.exports=a}),null);
__d("RelayFBResponseCache",["RelayRuntime"],(function(a,b,c,d,e,f){"use strict";a=b("RelayRuntime").QueryResponseCache;c=10;d=5*60*1e3;e.exports=new a({size:c,ttl:d})}),null);
__d("RelayFBNetworkLoggerTransaction",["RelayRuntime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=b("RelayRuntime").RelayNetworkLoggerTransaction;g=babelHelpers.inherits(a,c);h=g&&g.prototype;a.prototype.commitLogs=function(a,b,c){h.commitLogs.call(this,a,b,c),b&&delete b.__prefetched};a.prototype.flushLogs=function(a,b,c){h.flushLogs.call(this,a,b,c),b&&delete b.__prefetched};a.prototype.getLogsToPrint=function(a,b,c){a=h.getLogsToPrint.call(this,a,b,c);c=this.getRequest();if(c.operationKind==="query"){c=b&&b.__prefetched;a.push({label:"Prefetched",values:[c==null?"unknown":c]})}return a};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RelayFBNetworkLogger",["RelayFBNetworkLoggerTransaction","RelayRuntime"],(function(a,b,c,d,e,f){"use strict";a=b("RelayRuntime").createRelayNetworkLogger;e.exports=a(b("RelayFBNetworkLoggerTransaction"))}),null);
__d("createRelayFBGraphiQLPrinter",["URI"],(function(a,b,c,d,e,f){"use strict";function a(a){return function(c,d){var e=new(b("URI"))("http://our.intern.facebook.com");a?e.setPath("/intern/graphiql/"+a+"/"):e.setPath("/intern/graphiql/");c.id?e.addQueryData("query_id",c.id):e.addQueryData("query",c.text);e.addQueryData("variables",JSON.stringify(d));return e.toString()}}e.exports=a}),null);
__d("withLive",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){__p&&__p();var c=a.metadata;c=c.live;if(c!=null&&typeof c==="object"){c=h(a);a=i(a);c==null||a==null||g(0,45,c,a);c!=null||a!=null||g(0,46);if(c!=null){var d=b.poll;d==null||d===c||g(0,47,d,c);return babelHelpers["extends"]({},b,{poll:c})}if(a!=null){d=b.liveConfigId;d==null||d===a||g(0,48,d,a);return babelHelpers["extends"]({},b,{liveConfigId:a})}}return b}function h(a){a=a.metadata;a=a.live;if(a!=null&&typeof a==="object"){a.polling_interval==null||typeof a.polling_interval==="number"||g(0,49);return a.polling_interval}return null}function i(a){a=a.metadata;a=a.live;if(a!=null&&typeof a==="object"){a.config_id==null||typeof a.config_id==="string"||g(0,50);return a.config_id}return null}e.exports=a}),null);
__d("createRelayFBNetwork",["RelayAPIConfig","RelayTTRCHelper","processRelaySRPayload","withLive","RelayRuntime","RelayFBNetworkLogger","createRelayFBGraphiQLPrinter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").Network,h=b("RelayRuntime").RelayError;function i(a,c,d){var e;if((e=a.extensions)==null?void 0:e.__sr_unprocessed)throw h.create("GraphQLError","Fatal Error: Found unprocessed static resource payload");e=(e=a.extensions)==null?void 0:e.sr_payload;e!=null&&typeof e==="object"&&b("processRelaySRPayload")(e);a=(e=a.extensions)==null?void 0:e.cacheTimestamp;d.transactionId!=null&&(a==null||typeof a==="number")&&b("RelayTTRCHelper").addResponseSummary(d.transactionId,c,a)}function a(a,c){var d=g.create(a,c);return{execute:function(a,c,e,f){return d.execute(a,c,b("withLive")(a,e),f)["do"]({next:function(b){i(b,a.name,e)}})}}}e.exports=a}),null);
__d("RelayGraphQLRequestUtils",["RelayAPIConfig","XHRHttpError","getAsyncParams","getCrossOriginTransport","getSameOriginTransport","RelayRuntime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").RelayError,h={createErrorFromPayload:function(a){var b;typeof a==="object"?a.code||a.description?b=g.create("GraphQLError","GraphQL server responded with error %s: %s\n%s",a.code,a.description,a.debug_info||""):b=g.create("GraphQLError","GraphQL server responded with error: %s",JSON.stringify(a)):b=g.create("GraphQLError","GraphQL server responded with an error: %s",a);b=b;b.source=a;typeof a==="object"&&(b.code=a.code,b.description=a.description,b.summary=a.summary,b.debug_info=a.debug_info);return b},createErrorFromXHR:function(a,c){var d;for(var e=arguments.length,f=new Array(e>2?e-2:0),h=2;h<e;h++)f[h-2]=arguments[h];a.errorCode===b("XHRHttpError").HTTP_TRANSPORT_ERROR?d=g.createWarning.apply(g,["NetworkTransportError",c].concat(f)):a.errorCode===b("XHRHttpError").HTTP_CLIENT_ERROR&&a.errorMsg&&a.errorMsg.match(/OAuthException/)?d=g.create.apply(g,["NetworkOAuthError",c].concat(f)):d=g.create.apply(g,["NetworkRequestError",c].concat(f));d.source=a;return d},getRequestHeaders:function(){return babelHelpers["extends"]({"Content-Type":"application/x-www-form-urlencoded"},h.getRelayAPIConfigHeaders())},getRelayAPIConfigHeaders:function(){var a=babelHelpers["extends"]({},b("RelayAPIConfig").customHeaders);b("RelayAPIConfig").xhrEncoding&&(a["Content-Encoding"]=b("RelayAPIConfig").xhrEncoding);b("RelayAPIConfig").userAgent&&(a["User-Agent"]=b("RelayAPIConfig").userAgent);return a},getAuthenticationData:function(){return babelHelpers["extends"]({},h.getRelayAPIConfigAuthenticationData(),b("getAsyncParams")("POST"))},getRelayAPIConfigAuthenticationData:function(){if(b("RelayAPIConfig").useXController)return{av:b("RelayAPIConfig").actorID};else return{access_token:b("RelayAPIConfig").accessToken}},getTransportBuilder:function(){if(b("RelayAPIConfig").useXController)return b("getSameOriginTransport");return b("RelayAPIConfig").withCredentials?b("getCrossOriginTransport").withCredentials:b("getCrossOriginTransport")},parsePayload:function(a){try{return JSON.parse(a)}catch(b){throw g.create("JSONParseError","Response contained invalid JSON.\nReason: %s\n%s",b.message,a)}}};e.exports=h}),null);
__d("RelayPrefetchedResponseCache",["Promise","FBLogger","clearImmediate","setImmediateAcrossTransitions","stableStringify"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function i(a,b){return Object.prototype.hasOwnProperty.call(h,a)?h[a][b]:null}function j(a,b,c){if(Object.prototype.hasOwnProperty.call(h,a))h[a][b]=c;else{h[a]=(a={},a[b]=c,a)}}function k(a,b){Object.prototype.hasOwnProperty.call(g,a)&&(delete g[a][b],Object.keys(g[a]).length===0&&delete g[a]),Object.prototype.hasOwnProperty.call(h,a)&&(delete h[a][b],Object.keys(h[a]).length===0&&delete h[a])}function l(a,c){var d=i(a,c);d&&(b("clearImmediate")(d),k(a,c))}function m(a,c){i(a,c)||j(a,c,b("setImmediateAcrossTransitions")(function(){k(a,c)}))}function n(a,b){return Object.prototype.hasOwnProperty.call(g,a)?g[a][b]:null}function o(a,b,c){if(Object.prototype.hasOwnProperty.call(g,a))g[a][b]=c;else{g[a]=(a={},a[b]=c,a)}}a={get:function(a,c,d){__p&&__p();c=b("stableStringify")(c);m(a,c);var e=n(a,c);if(e)return e;if(g[a]&&Object.keys(g[a]).length>0){e=Object.keys(g[a]);b("FBLogger")("RelayQueryPreloader").addMetadata("RELAY_PRELOADER","QUERY_ID",a).warn("RelayPrefetchedResponseCache:.get: Could not find preloaded data for query: %s with variables %s, but had data for that query with variables: %s",d!=null?d:a,c,e.join("||"))}return null},registerPreloader:function(a,c,d){__p&&__p();var e=b("stableStringify")(c);l(a,e);n(a,e)!=null&&(b("FBLogger")("RelayQueryPreloader").addMetadata("RELAY_PRELOADER","QUERY_ID",a).mustfix("RelayPrefetchedResponseProvider::registerPreloader(): You must not register more than one preloader for the query with ID `%s` and variables `%s`. This could result in stale data.",a,b("stableStringify")(c)),k(a,e));c=d.peek();if(c&&c.result){o(a,e,c.result);d.cleanup();return b("Promise").resolve(c.result)}else{var f=new(b("Promise"))(function(b,c){d.onLoaded(function(c){c=c.result;var g=n(a,e);g===f&&o(a,e,c);d.cleanup();b(c)}),d.onError(function(a){a=a.error;d.cleanup();c(a)})});o(a,e,f);return f}}};e.exports=a}),null);
__d("RelayPrefetchedResponseProvider",["RelayGraphQLRequestUtils","RelayPrefetchedResponseCache","RelayRuntime","isPromise"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").Observable;a={get:function(a,c,d){__p&&__p();return g.create(function(e){__p&&__p();var f=function(a){__p&&__p();if(!a){e.complete();return}if(a.errors)for(var c=a.errors,d=Array.isArray(c),f=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;if(g.severity==="CRITICAL"){e.error(b("RelayGraphQLRequestUtils").createErrorFromPayload(g));return}}e.next(a);e.complete()},g=b("RelayPrefetchedResponseCache").get(a,c,d);g?b("isPromise")(g)?g.then(f)["catch"](function(){return e.complete()}):f(g):e.complete()})},registerPreloader:function(a,c,d){return b("RelayPrefetchedResponseCache").registerPreloader(a,c,d)}};e.exports=a}),null);
__d("createRelayFBNetworkFetch",["invariant","RelayAPIConfig","RelayAPIRequest","RelayFBResponseCache","RelayGraphQLRequestUtils","RelayPrefetchedResponseProvider","getAsyncParams","nullthrows","RelayRuntime"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RelayRuntime").Observable,i=b("RelayRuntime").RelayConcreteNode,j=b("RelayRuntime").RelayError,k=b("RelayRuntime").RelayProfiler;function l(a){return a.operationKind==="mutation"}function m(a){return a.operationKind==="query"}function n(b){if(!a.FormData)throw new Error("Uploading files without `FormData` not supported.");var c=new FormData();for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.append(d,b[d]);return c}function o(a,b){if(b!=null)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.append(c,b[c]);return a}function p(a){var b=a.id;a=a.text;b=b||a;b!=null||g(0,2664);return b}function c(a){__p&&__p();var c=a.graphURI,d=a.graphBatchURI,e=a.transportBuilder,f=a.getAdditionalData,i=a.getAdditionalHeaders,j=a.queryResponseCache,k=a.whitelistMutationsForResponseCache,l=a.liveQueryFetchFn;return function(a,m,n,o){var p=c||b("RelayAPIConfig").graphURI,t=d||b("RelayAPIConfig").graphBatchURI,v=j||b("RelayFBResponseCache"),w=e||b("RelayGraphQLRequestUtils").getTransportBuilder(),x=f?f():b("RelayGraphQLRequestUtils").getRelayAPIConfigAuthenticationData(),y=i?i():b("RelayGraphQLRequestUtils").getRelayAPIConfigHeaders(),z={queryName:a.name,usedCache:!1,usedPrefetcher:!1},A=h.create(function(a){return a.complete()});n.liveConfigId!=null&&(l!=null||g(0,void 0),A=l(a,m,{actor_id:b("RelayAPIConfig").actorID,access_token:b("RelayAPIConfig").accessToken,config_id:n.liveConfigId}));p=u(p,t,w,y,a,m,n,v,o,x,k);t=r(a,m,z,v,n);w=s(a,m,z,n,v);y=A.ifEmpty(t).ifEmpty(w).ifEmpty(p);return q(z,y)}}function q(a,b){var c;return b["do"]({start:function(){c=k.profile("fetchRelayQuery",a)},next:function(){c.stop()},error:function(a){c.stop(a)}})}function r(a,c,d,e,f){__p&&__p();if(!m(a))return h.create(function(a){return a.complete()});var i=p(a);f=f!=null&&f.metadata!=null&&f.metadata.prefetchedResponseProvider||void 0;f!=null&&(typeof f.get==="function"||g(0,2666),f=f);f=f||b("RelayPrefetchedResponseProvider");f=f.get(i,c,a.name);return f.map(function(a){d.usedPrefetcher=!0;e.set(i,c,a);return a})}function s(a,b,c,d,e){return h.create(function(f){if(m(a)&&!d.force){var g=e.get(p(a),b);g&&(c.usedCache=!0,f.next(g))}f.complete()})}function t(a,c){var d=a.id;a=a.text;d||a||g(0,2664);c=JSON.stringify(c);return d?{variables:c,doc_id:d}:{variables:c,doc:b("nullthrows")(a)}}function u(a,b,c,d,e,f,g,h,j,k,m){b=j?n(j):null;g=v(a,c,d,e,f,t(e,f),b,k);j=g["do"]({next:function(a){if(l(e)){var b=e.name;(m==null||!m[b])&&h.clear()}else e.kind===i.REQUEST&&h.set(p(e),f,a)}});return j}function v(a,c,d,e,f,g,i,k){__p&&__p();return h.create(function(f){__p&&__p();var m=b("RelayAPIConfig").getAnalyticsTags;(!l(e)||m==null)&&(m=function(){return h.from(null)});m().subscribe({next:function(h){__p&&__p();var m=new(b("RelayAPIRequest"))(a).setMethod("POST").setSkipRetry(l(e)).setTrackingName("RelayFBNetwork_"+e.name).setTransportBuilder(c).setErrorHandler(function(a){f.error(b("RelayGraphQLRequestUtils").createErrorFromXHR(a,"Network request encountered error %s %s: %s",a.errorType,a.errorCode,a.errorMsg))}).setTimeoutHandler(function(){f.error(j.createWarning("NetworkTimeoutError","Network request timed out."))}).setResponseChunkHandler(function(a,c,d){__p&&__p();try{c=b("RelayGraphQLRequestUtils").parsePayload(a)}catch(a){return f.error(a)}if(!c)return f.error(j.createWarning("EmptyResponseError","Parsed network response is empty"));if(c.errors)for(var a=c.errors,e=Array.isArray(a),g=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;if(h.severity==="CRITICAL")return f.error(b("RelayGraphQLRequestUtils").createErrorFromPayload(h))}f.next(c);d&&f.complete()}),n=babelHelpers["extends"]({},k,b("getAsyncParams")("POST"),{fb_api_caller_class:"RelayModern"},g);h!=null&&h.length>0&&(n.fb_api_analytics_tags=JSON.stringify(h));i!=null?m.setRawData(o(i,n)):m.setData(n).setRequestHeaders(babelHelpers["extends"]({"Content-Type":"application/x-www-form-urlencoded"},d));return m.send().abort}})})}e.exports=c}),null);
__d("RelayRTIGraphQLSubscriberUtils",["invariant","Promise","ActorURI","CSRFGuard","CurrentLocale","CurrentUser","RelayAPIConfig","URI","XHRRequest","getAsyncParams","getCrossOriginTransport"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();if(d!=null&&f!=null){var h={locale:b("CurrentLocale").get(),queryID:d,serializedQueryParameters:JSON.stringify(e),viewerID:b("CurrentUser").getID()};return b("Promise").resolve({topic:f,transformContext:h})}c!=null||d!=null||g(0,271);return new(b("Promise"))(function(f,g){__p&&__p();var h;h=babelHelpers["extends"]((h={},h[b("ActorURI").PARAMETER_ACTOR]=b("RelayAPIConfig").actorID,h.query_params=JSON.stringify(e),h),b("getAsyncParams")("POST"));d!=null&&(h.doc_id=d);c!=null&&(h.query=c);h=new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport").withCredentials).setMethod("POST").setData(h).setResponseHandler(function(a){try{var c=JSON.parse(b("CSRFGuard").clean(a));f({topic:c.payload.topic,transformContext:JSON.parse(c.payload.transform_context)})}catch(b){g(new Error("getTopicAndTransformContext: encountered error "+b+" during "+("parsing, raw response is \n"+a)))}});h.send()})}e.exports={getTopicAndTransformContext:a}}),null);
__d("RelayRTIGraphQLSubscriptionTopicProvider",["FBLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.registerProvider=function(a,c){if(Object.prototype.hasOwnProperty.call(this.$1,a)){b("FBLogger")("relay").mustfix("Multiple RTIGraphQLSubscription topic providers were registered for the query: %s",a);return}this.$1[a]=c};a.prototype.getTopicForQuery=function(a,c){var d=this.$1[a]||null;if(d==null)return null;var e=null;try{e=d(c)}catch(c){b("FBLogger")("relay").catching(c).mustfix("TopicProvider for queryID %s threw an unexpected exception",a)}return(d=e)!=null?d:null};e.exports=new a()}),null);
__d("RelayRTIGraphQLSubscriber",["invariant","GraphQLSubscriptionsLoggerEvent","GraphQLSubscriptionsMechanism","GraphQLSubscriptionsTypedLogger","RelayRTIGraphQLSubscriberUtils","RelayRTIGraphQLSubscriptionTopicProvider","RelayRuntime","SkywalkerManager","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RelayRTIGraphQLSubscriberUtils").getTopicAndTransformContext,i=b("RelayRuntime").Observable;new Set();var j=155160167952447;function a(a,b,c,d){return k(a,b,c)["do"]({next:function(){d&&d.clear()}})}function k(a,c,d){var e=c.operation.selections[0];e&&e.kind==="LinkedField"||g(0,6091,c.name);var f=function(a){new(b("GraphQLSubscriptionsTypedLogger"))().setSubscriptionCall(e.name).setQueryParams({input:JSON.stringify(d.input)}).setMechanism(b("GraphQLSubscriptionsMechanism").SKYWALKER).setEvent(a).log()};return l(a,c,d)["do"]({start:function(){f(b("GraphQLSubscriptionsLoggerEvent").CLIENT_SUBSCRIBE)},next:function(){f(b("GraphQLSubscriptionsLoggerEvent").RECEIVEPAYLOAD)},unsubscribe:function(){f(b("GraphQLSubscriptionsLoggerEvent").CLIENT_UNSUBSCRIBE)}})}function l(a,c,d){__p&&__p();return i.create(function(e){__p&&__p();var f,g=c.id,i=g?b("RelayRTIGraphQLSubscriptionTopicProvider").getTopicForQuery(g,d):null;h(a,null,g,d,i).then(function(c){var a=c.topic;c=c.transformContext;if(e.closed)return;c.appID=j;var d={};d.context={transformContext:JSON.stringify(c)};f=b("SkywalkerManager").subscribe(b("nullthrows")(a),function(a){return e.next({data:JSON.parse(a.payload)})},d)})["catch"](e.error);return function(){return f&&f.unsubscribe()}})}e.exports=a}),null);
__d("RelayFBSubscribeFunction",["GQLSHeartbeatConfig","RelayAPIConfig","RelayRTIGraphQLSubscriber","RelayRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("GQLSHeartbeatConfig").heartbeat_interval;b("RelayRuntime").Observable;function a(a,c,d){if(b("RelayAPIConfig").subscriptionTopicURI==null)throw new Error("RelayFBSubscribeFunction: `RelayAPIConfig.subscriptionTopicURI` should not be null on www");c["%options"]&&c["%options"].heartbeat&&(c["%options"].heartbeat={interval:g});return b("RelayRTIGraphQLSubscriber")(b("RelayAPIConfig").subscriptionTopicURI,a,c,d)}e.exports=a}),null);
__d("createRelayFBSubscribeFunction",["RelayFBSubscribeFunction"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.queryResponseCache;return function(a,d){return b("RelayFBSubscribeFunction")(a,d,c)}}e.exports=a}),null);
__d("RelayFBNetwork",["RelayFBResponseCache","createRelayFBNetwork","createRelayFBNetworkFetch","createRelayFBSubscribeFunction"],(function(a,b,c,d,e,f){"use strict";e.exports=b("createRelayFBNetwork")(b("createRelayFBNetworkFetch")({queryResponseCache:b("RelayFBResponseCache")}),b("createRelayFBSubscribeFunction")({queryResponseCache:b("RelayFBResponseCache")}))}),null);
__d("RelayFBMissingFieldHandlers",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g=b("relay-runtime").ROOT_TYPE;a=[{kind:"linked",handle:function(a,b,c){if(b!=null&&b.__typename===g&&a.name==="node"&&Object.prototype.hasOwnProperty.call(c,"id"))return c.id}},{kind:"pluralLinked",handle:function(a,b,c){if(b!=null&&b.__typename===g&&a.name==="nodes"&&Object.prototype.hasOwnProperty.call(c,"ids"))return c.ids}}];e.exports=a}),null);
__d("RelayFBDefaultEnvironment",["FBLogger","RelayFBMissingFieldHandlers","RelayRuntime","RelayFBNetwork"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayRuntime").Environment;c=b("RelayRuntime").Observable;d=b("RelayRuntime").RecordSource;f=b("RelayRuntime").Store;c.onUnhandledError(function(a,c){var d=b("FBLogger")("relay");a instanceof Error?(d.catching(a),c?d.mustfix("An uncaught error was thrown inside `RelayObservable`."):d.warn("An error was caught inside `RelayObservable`.")):c?d.mustfix("An uncaught error was thrown inside `RelayObservable` but it was not an instance of `Error`. Please change your code so that it throws a bonafide `Error` object instead of `%s`.",a):d.warn("An error was caught inside `RelayObservable` but it was not aninstance of `Error`. Please change your code so that it throws a bonafide `Error` object instead of `%s`.",a)});c=new d();d=new f(c);f=new a({configName:"RelayFBDefaultEnvironment",network:b("RelayFBNetwork"),store:d,missingFieldHandlers:b("RelayFBMissingFieldHandlers")});e.exports=f}),null);
__d("XRelayBootloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/relay/bootload/",{component:{type:"String",required:!0},params:{type:"String",required:!0},route:{type:"String",required:!0},uri:{type:"String",required:!0}})}),null);